C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE API_USER_COMM
OBJECT MODULE PLACED IN .\Api_User_Comm.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE ..\C_Source\S4_ApiUser\Api_User_Comm.c LARGE WARNINGLEVEL(1) BROWSE INCDIR(
                    -..\C_Source\S0_System;..\C_Source\S1_HardDrv;..\C_Source\S2_MyLib;..\C_Source\S3_ApiPlat;..\C_Source\S4_ApiUser;..\C_Sou
                    -rce\S5_ApiProtocol;..\C_Source\S6_MyIncludes;..\C_Source\S1_HardDrv\V9811A_EMU;..\C_Source\S1_HardDrv\V9811A_MCU;..\C_So
                    -urce\S1_HardDrv\E2P_24CXXX) DEBUG OBJECTEXTEND PRINT(.\Api_User_Comm.lst) OBJECT(.\Api_User_Comm.obj)

line level    source

   1          /*
   2          *****************Copyright (c)*************************************
   3          **      Hangzhou Xili Watthour Meter Manufacture Co., Ltd. 
   4          **--------------file info--------------------------------------------
   5          **name                  : Api_User_Comm.c
   6          **Author                : maji
   7          **date                  : 2016-04-21 
   8          **description   : Õ®—∂¥¶¿Ì”¶”√≤„œ‡πÿ∫Ø ˝≥Ã–ÚCŒƒº˛
   9          **note                  : V9811A £¨MERTER FOR DL03C
  10          **--------------------Version History -------------------------------------
  11          ** NO. Date         Ver      By         Description 
  12          **==============================================================
  13          ** 1   2016-04-26   v01.00   sosomj     1. frist version                             
  14          **
  15          **==============================================================
  16          */
  17          
  18          
  19          
  20          #include <MyIncludes_H.h>
  21          
  22          
  23          /*******************************************************************************
  24          * »´æ÷±‰¡ø∂®“Â«¯
  25          *******************************************************************************/
  26          uint8 *P_IEC_BUFF;    //Õ®—∂ª∫≥Â«¯÷∏’Î //
  27          uint8 g_ch_comm;   //µ±«∞Õ®—∂Õ®µ¿∫≈ //
  28          UART_COMM_APP_VAR  gs_uart_iec_app_var[UART_CH_NUM];
  29          COMM_DATA  comm_data;
  30          
  31          
  32          /*******************************************************************************
  33          * ≥£¡ø±Ì«¯
  34          *******************************************************************************/
  35          code INT8U Super_mima_iec[8] ={'4','5','6','1','2','3','0','0'};
  36          code INT8U meter_info[Meter_INFO_LENTH] = {'X','L','E','3','D','D','S','3','1','1','-','7','V','4','.','1'
             -,};        // “ÚŒ™‘∂∫ÏÕ‚£¨¿©’πŒ™2400bps//
  37          code INT8U meter_info_IR[Meter_INFO_LENTH] = {'X','L','E','2','D','D','S','3','1','1','-','7','V','4','.',
             -'1',};        // “ÚŒ™‘∂∫ÏÕ‚£¨¿©’πŒ™2400bps//
  38          code INT8U mima_info[MIMA_INFO_LENTH] = {'(','1','1','1','1','1','1','1','1',')',};
  39          
  40          /*********************************************************************************************************
  41          **  Õ®—∂ID±Ì∏Ò
  42          ********************************************************************************************************/
  43           code IEC_COMDISTAB    IEC_ComDisTab[] =
  44          {
  45              // ”–π¶∫œœ‡∑—¬ ◊‹//
  46              0x00010000, &gs_energy_user_data.us_val[EC_CH_AC_PT_TT][TARIFF_T].buf[0],   EN_R+P_RAM,     4,8,    //µ±«∞◊‹µÁ¡
             -ø
  47              0x00010001, ADR_BLOCK101_BILL1_DATA_E2P+(OFFSET_bill_data_ec+TARIFF_T*LEN_EC_UNIT), EN_R+P_E2P1+CM_BIL
             -L ,4,8,        //…œ1‘¬µÁ¡ø
  48              0x00010002, ADR_BLOCK102_BILL2_DATA_E2P+(OFFSET_bill_data_ec+TARIFF_T*LEN_EC_UNIT), EN_R+P_E2P1+CM_BIL
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 2   

             -L,4,8,        //…œ2‘¬µÁ¡ø
  49              0x00010003, ADR_BLOCK103_BILL3_DATA_E2P+(OFFSET_bill_data_ec+TARIFF_T*LEN_EC_UNIT), EN_R+P_E2P1+CM_BIL
             -L,4,8,        //…œ3‘¬µÁ¡ø
  50              0x00010004, ADR_BLOCK104_BILL4_DATA_E2P+(OFFSET_bill_data_ec+TARIFF_T*LEN_EC_UNIT), EN_R+P_E2P1+CM_BIL
             -L,4,8,        //…œ4‘¬µÁ¡ø
  51              0x00010005, ADR_BLOCK105_BILL5_DATA_E2P+(OFFSET_bill_data_ec+TARIFF_T*LEN_EC_UNIT), EN_R+P_E2P1+CM_BIL
             -L,4,8,        //…œ5‘¬µÁ¡ø
  52              0x00010006, ADR_BLOCK106_BILL6_DATA_E2P+(OFFSET_bill_data_ec+TARIFF_T*LEN_EC_UNIT), EN_R+P_E2P1+CM_BIL
             -L,4,8,        //…œ6‘¬µÁ¡ø
  53              0x00010007, ADR_BLOCK107_BILL7_DATA_E2P+(OFFSET_bill_data_ec+TARIFF_T*LEN_EC_UNIT), EN_R+P_E2P1+CM_BIL
             -L,4,8,        //…œ7‘¬µÁ¡ø
  54              0x00010008, ADR_BLOCK108_BILL8_DATA_E2P+(OFFSET_bill_data_ec+TARIFF_T*LEN_EC_UNIT), EN_R+P_E2P1+CM_BIL
             -L,4,8,        //…œ8‘¬µÁ¡ø
  55              0x00010009, ADR_BLOCK109_BILL9_DATA_E2P+(OFFSET_bill_data_ec+TARIFF_T*LEN_EC_UNIT), EN_R+P_E2P1+CM_BIL
             -L,4,8,        //…œ9‘¬µÁ¡ø
  56              0x0001000A, ADR_BLOCK110_BILL10_DATA_E2P+(OFFSET_bill_data_ec+TARIFF_T*LEN_EC_UNIT),        EN_R+P_E2P1+CM_BI
             -LL,4,8,        //…œ10‘¬µÁ¡ø
  57              0x0001000B, ADR_BLOCK111_BILL11_DATA_E2P+(OFFSET_bill_data_ec+TARIFF_T*LEN_EC_UNIT),        EN_R+P_E2P1+CM_BI
             -LL,4,8,        //…œ11‘¬µÁ¡ø
  58              0x0001000C, ADR_BLOCK112_BILL12_DATA_E2P+(OFFSET_bill_data_ec+TARIFF_T*LEN_EC_UNIT),        EN_R+P_E2P1+CM_BI
             -LL,4,8,        //…œ12‘¬µÁ¡ø
  59              // ”–π¶∑—¬ 1 F1  //
  60              0x00010100, &gs_energy_user_data.us_val[EC_CH_AC_PT_TT][TARIFF1].buf[0],    EN_R+P_RAM,     4,8,    //µ±«∞◊‹µÁ¡ø
  61              0x00010101, ADR_BLOCK101_BILL1_DATA_E2P+(OFFSET_bill_data_ec+TARIFF1*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             - ,4,8,        //…œ1‘¬µÁ¡ø
  62              0x00010102, ADR_BLOCK102_BILL2_DATA_E2P+(OFFSET_bill_data_ec+TARIFF1*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ2‘¬µÁ¡ø
  63              0x00010103, ADR_BLOCK103_BILL3_DATA_E2P+(OFFSET_bill_data_ec+TARIFF1*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ3‘¬µÁ¡ø
  64              0x00010104, ADR_BLOCK104_BILL4_DATA_E2P+(OFFSET_bill_data_ec+TARIFF1*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ4‘¬µÁ¡ø
  65              0x00010105, ADR_BLOCK105_BILL5_DATA_E2P+(OFFSET_bill_data_ec+TARIFF1*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ5‘¬µÁ¡ø
  66              0x00010106, ADR_BLOCK106_BILL6_DATA_E2P+(OFFSET_bill_data_ec+TARIFF1*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ6‘¬µÁ¡ø
  67              0x00010107, ADR_BLOCK107_BILL7_DATA_E2P+(OFFSET_bill_data_ec+TARIFF1*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ7‘¬µÁ¡ø
  68              0x00010108, ADR_BLOCK108_BILL8_DATA_E2P+(OFFSET_bill_data_ec+TARIFF1*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ8‘¬µÁ¡ø
  69              0x00010109, ADR_BLOCK109_BILL9_DATA_E2P+(OFFSET_bill_data_ec+TARIFF1*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ9‘¬µÁ¡ø
  70              0x0001010A, ADR_BLOCK110_BILL10_DATA_E2P+(OFFSET_bill_data_ec+TARIFF1*LEN_EC_UNIT), EN_R+P_E2P1+CM_BIL
             -L,4,8,        //…œ10‘¬µÁ¡ø
  71              0x0001010B, ADR_BLOCK111_BILL11_DATA_E2P+(OFFSET_bill_data_ec+TARIFF1*LEN_EC_UNIT), EN_R+P_E2P1+CM_BIL
             -L,4,8,        //…œ11‘¬µÁ¡ø
  72              0x0001010C, ADR_BLOCK112_BILL12_DATA_E2P+(OFFSET_bill_data_ec+TARIFF1*LEN_EC_UNIT), EN_R+P_E2P1+CM_BIL
             -L,4,8,        //…œ12‘¬µÁ¡ø
  73              // ”–π¶∑—¬ 2 F2
  74              0x00010200, &gs_energy_user_data.us_val[EC_CH_AC_PT_TT][TARIFF2].buf[0],    EN_R+P_RAM,     4,8,    //µ±«∞◊‹µÁ¡ø
  75              0x00010201, ADR_BLOCK101_BILL1_DATA_E2P+(OFFSET_bill_data_ec+TARIFF2*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             - ,4,8,        //…œ1‘¬µÁ¡ø
  76              0x00010202, ADR_BLOCK102_BILL2_DATA_E2P+(OFFSET_bill_data_ec+TARIFF2*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ2‘¬µÁ¡ø
  77              0x00010203, ADR_BLOCK103_BILL3_DATA_E2P+(OFFSET_bill_data_ec+TARIFF2*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ3‘¬µÁ¡ø
  78              0x00010204, ADR_BLOCK104_BILL4_DATA_E2P+(OFFSET_bill_data_ec+TARIFF2*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ4‘¬µÁ¡ø
  79              0x00010205, ADR_BLOCK105_BILL5_DATA_E2P+(OFFSET_bill_data_ec+TARIFF2*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ5‘¬µÁ¡ø
  80              0x00010206, ADR_BLOCK106_BILL6_DATA_E2P+(OFFSET_bill_data_ec+TARIFF2*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ6‘¬µÁ¡ø
  81              0x00010207, ADR_BLOCK107_BILL7_DATA_E2P+(OFFSET_bill_data_ec+TARIFF2*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 3   

             -,4,8,        //…œ7‘¬µÁ¡ø
  82              0x00010208, ADR_BLOCK108_BILL8_DATA_E2P+(OFFSET_bill_data_ec+TARIFF2*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ8‘¬µÁ¡ø
  83              0x00010209, ADR_BLOCK109_BILL9_DATA_E2P+(OFFSET_bill_data_ec+TARIFF2*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ9‘¬µÁ¡ø
  84              0x0001020A, ADR_BLOCK110_BILL10_DATA_E2P+(OFFSET_bill_data_ec+TARIFF2*LEN_EC_UNIT), EN_R+P_E2P1+CM_BIL
             -L,4,8,        //…œ10‘¬µÁ¡ø
  85              0x0001020B, ADR_BLOCK111_BILL11_DATA_E2P+(OFFSET_bill_data_ec+TARIFF2*LEN_EC_UNIT), EN_R+P_E2P1+CM_BIL
             -L,4,8,        //…œ11‘¬µÁ¡ø
  86              0x0001020C, ADR_BLOCK112_BILL12_DATA_E2P+(OFFSET_bill_data_ec+TARIFF2*LEN_EC_UNIT), EN_R+P_E2P1+CM_BIL
             -L,4,8,        //…œ12‘¬µÁ¡ø
  87              // ”–π¶∑—¬ 3 F3
  88              0x00010300,  &gs_energy_user_data.us_val[EC_CH_AC_PT_TT][TARIFF3].buf[0],   EN_R+P_RAM,     4,8,    //µ±«∞◊‹µÁ¡
             -ø
  89              0x00010301, ADR_BLOCK101_BILL1_DATA_E2P+(OFFSET_bill_data_ec+TARIFF3*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             - ,4,8,        //…œ1‘¬µÁ¡ø
  90              0x00010302, ADR_BLOCK102_BILL2_DATA_E2P+(OFFSET_bill_data_ec+TARIFF3*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ2‘¬µÁ¡ø
  91              0x00010303, ADR_BLOCK103_BILL3_DATA_E2P+(OFFSET_bill_data_ec+TARIFF3*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ3‘¬µÁ¡ø
  92              0x00010304, ADR_BLOCK104_BILL4_DATA_E2P+(OFFSET_bill_data_ec+TARIFF3*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ4‘¬µÁ¡ø
  93              0x00010305, ADR_BLOCK105_BILL5_DATA_E2P+(OFFSET_bill_data_ec+TARIFF3*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ5‘¬µÁ¡ø
  94              0x00010306, ADR_BLOCK106_BILL6_DATA_E2P+(OFFSET_bill_data_ec+TARIFF3*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ6‘¬µÁ¡ø
  95              0x00010307, ADR_BLOCK107_BILL7_DATA_E2P+(OFFSET_bill_data_ec+TARIFF3*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ7‘¬µÁ¡ø
  96              0x00010308, ADR_BLOCK108_BILL8_DATA_E2P+(OFFSET_bill_data_ec+TARIFF3*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ8‘¬µÁ¡ø
  97              0x00010309, ADR_BLOCK109_BILL9_DATA_E2P+(OFFSET_bill_data_ec+TARIFF3*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ9‘¬µÁ¡ø
  98              0x0001030A, ADR_BLOCK110_BILL10_DATA_E2P+(OFFSET_bill_data_ec+TARIFF3*LEN_EC_UNIT), EN_R+P_E2P1+CM_BIL
             -L,4,8,        //…œ10‘¬µÁ¡ø
  99              0x0001030B, ADR_BLOCK111_BILL11_DATA_E2P+(OFFSET_bill_data_ec+TARIFF3*LEN_EC_UNIT), EN_R+P_E2P1+CM_BIL
             -L,4,8,        //…œ11‘¬µÁ¡ø
 100              0x0001030C, ADR_BLOCK112_BILL12_DATA_E2P+(OFFSET_bill_data_ec+TARIFF3*LEN_EC_UNIT), EN_R+P_E2P1+CM_BIL
             -L,4,8,        //…œ12‘¬µÁ¡ø
 101              // ”–π¶∑—¬ 4 F4
 102              0x00010400, &gs_energy_user_data.us_val[EC_CH_AC_PT_TT][TARIFF4].buf[0],    EN_R+P_RAM,     4,8,    //µ±«∞◊‹µÁ¡ø
 103              0x00010401, ADR_BLOCK101_BILL1_DATA_E2P+(OFFSET_bill_data_ec+TARIFF4*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             - ,4,8,        //…œ1‘¬µÁ¡ø
 104              0x00010402, ADR_BLOCK102_BILL2_DATA_E2P+(OFFSET_bill_data_ec+TARIFF4*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ2‘¬µÁ¡ø
 105              0x00010403, ADR_BLOCK103_BILL3_DATA_E2P+(OFFSET_bill_data_ec+TARIFF4*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ3‘¬µÁ¡ø
 106              0x00010404, ADR_BLOCK104_BILL4_DATA_E2P+(OFFSET_bill_data_ec+TARIFF4*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ4‘¬µÁ¡ø
 107              0x00010405, ADR_BLOCK105_BILL5_DATA_E2P+(OFFSET_bill_data_ec+TARIFF4*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ5‘¬µÁ¡ø
 108              0x00010406, ADR_BLOCK106_BILL6_DATA_E2P+(OFFSET_bill_data_ec+TARIFF4*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ6‘¬µÁ¡ø
 109              0x00010407, ADR_BLOCK107_BILL7_DATA_E2P+(OFFSET_bill_data_ec+TARIFF4*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ7‘¬µÁ¡ø
 110              0x00010408, ADR_BLOCK108_BILL8_DATA_E2P+(OFFSET_bill_data_ec+TARIFF4*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ8‘¬µÁ¡ø
 111              0x00010409, ADR_BLOCK109_BILL9_DATA_E2P+(OFFSET_bill_data_ec+TARIFF4*LEN_EC_UNIT),  EN_R+P_E2P1+CM_BILL
             -,4,8,        //…œ9‘¬µÁ¡ø
 112              0x0001040A, ADR_BLOCK110_BILL10_DATA_E2P+(OFFSET_bill_data_ec+TARIFF4*LEN_EC_UNIT), EN_R+P_E2P1+CM_BIL
             -L,4,8,        //…œ10‘¬µÁ¡ø
 113              0x0001040B, ADR_BLOCK111_BILL11_DATA_E2P+(OFFSET_bill_data_ec+TARIFF4*LEN_EC_UNIT), EN_R+P_E2P1+CM_BIL
             -L,4,8,        //…œ11‘¬µÁ¡ø
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 4   

 114              0x0001040C, ADR_BLOCK112_BILL12_DATA_E2P+(OFFSET_bill_data_ec+TARIFF4*LEN_EC_UNIT), EN_R+P_E2P1+CM_BIL
             -L,4,8,        //…œ12‘¬µÁ¡ø
 115          
 116              //–Ë¡ø ◊‹
 117              0x01010000, ADR_BLOCK01_MMD_L0_E2P+(TARIFF_T*LEN_MMD_UNIT), EN_R+P_E2P1,8,16,//µ±«∞–Ë¡ø¿‡ ˝æ› 3+5 –Ë¡ø
             -+ ±º‰
 118              0x01010001, ADR_BLOCK101_BILL1_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF_T*LEN_MMD_UNIT), EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 119              0x01010002, ADR_BLOCK102_BILL2_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF_T*LEN_MMD_UNIT), EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 120              0x01010003, ADR_BLOCK103_BILL3_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF_T*LEN_MMD_UNIT), EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 121              0x01010004, ADR_BLOCK104_BILL4_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF_T*LEN_MMD_UNIT), EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 122              0x01010005, ADR_BLOCK105_BILL5_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF_T*LEN_MMD_UNIT), EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 123              0x01010006, ADR_BLOCK106_BILL6_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF_T*LEN_MMD_UNIT), EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 124              0x01010007, ADR_BLOCK107_BILL7_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF_T*LEN_MMD_UNIT), EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 125              0x01010008, ADR_BLOCK108_BILL8_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF_T*LEN_MMD_UNIT), EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 126              0x01010009, ADR_BLOCK109_BILL9_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF_T*LEN_MMD_UNIT), EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 127              0x0101000A, ADR_BLOCK110_BILL10_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF_T*LEN_MMD_UNIT), EN_R+P_E2P1+CM_
             -BILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 128              0x0101000B, ADR_BLOCK111_BILL11_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF_T*LEN_MMD_UNIT), EN_R+P_E2P1+CM_
             -BILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 129              0x0101000C, ADR_BLOCK112_BILL12_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF_T*LEN_MMD_UNIT),EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 130                  //–Ë¡ø F1
 131                  0x01010100,     ADR_BLOCK01_MMD_L0_E2P+(TARIFF1*LEN_MMD_UNIT), EN_R+P_E2P1,8,16,//µ±«∞–Ë¡ø¿‡ ˝æ› 3+5 –Ë¡ø+ ±º
             -‰
 132              0x01010101, ADR_BLOCK101_BILL1_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF1*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 133              0x01010102, ADR_BLOCK102_BILL2_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF1*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 134              0x01010103, ADR_BLOCK103_BILL3_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF1*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 135              0x01010104, ADR_BLOCK104_BILL4_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF1*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 136              0x01010105, ADR_BLOCK105_BILL5_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF1*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 137              0x01010106, ADR_BLOCK106_BILL6_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF1*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 138              0x01010107, ADR_BLOCK107_BILL7_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF1*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 139              0x01010108, ADR_BLOCK108_BILL8_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF1*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 140              0x01010109, ADR_BLOCK109_BILL9_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF1*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 141              0x0101010A, ADR_BLOCK110_BILL10_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF1*LEN_MMD_UNIT),       EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 142              0x0101010B, ADR_BLOCK111_BILL11_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF1*LEN_MMD_UNIT),       EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 143              0x0101010C, ADR_BLOCK112_BILL12_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF1*LEN_MMD_UNIT),       EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 144                  //–Ë¡ø F2
 145                  0x01010200,     ADR_BLOCK01_MMD_L0_E2P+(TARIFF2*LEN_MMD_UNIT), EN_R+P_E2P1,8,16,//µ±«∞–Ë¡ø¿‡ ˝æ› 3+5 –Ë¡ø+ ±º
             -‰
 146              0x01010201, ADR_BLOCK101_BILL1_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF2*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 5   

 147              0x01010202, ADR_BLOCK102_BILL2_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF2*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 148              0x01010203, ADR_BLOCK103_BILL3_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF2*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 149              0x01010204, ADR_BLOCK104_BILL4_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF2*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 150              0x01010205, ADR_BLOCK105_BILL5_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF2*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 151              0x01010206, ADR_BLOCK106_BILL6_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF2*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 152              0x01010207, ADR_BLOCK107_BILL7_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF2*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 153              0x01010208, ADR_BLOCK108_BILL8_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF2*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 154              0x01010209, ADR_BLOCK109_BILL9_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF2*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 155              0x0101020A, ADR_BLOCK110_BILL10_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF2*LEN_MMD_UNIT),       EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 156              0x0101020B, ADR_BLOCK111_BILL11_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF2*LEN_MMD_UNIT),       EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 157              0x0101020C, ADR_BLOCK112_BILL12_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF2*LEN_MMD_UNIT),       EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 158                  //–Ë¡ø F3
 159                  0x01010300,     ADR_BLOCK01_MMD_L0_E2P+(TARIFF3*LEN_MMD_UNIT), EN_R+P_E2P1,8,16,//µ±«∞–Ë¡ø¿‡ ˝æ› 3+5 –Ë¡ø+ ±º
             -‰
 160              0x01010301, ADR_BLOCK101_BILL1_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF3*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 161              0x01010302, ADR_BLOCK102_BILL2_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF3*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 162              0x01010303, ADR_BLOCK103_BILL3_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF3*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 163              0x01010304, ADR_BLOCK104_BILL4_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF3*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 164              0x01010305, ADR_BLOCK105_BILL5_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF3*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 165              0x01010306, ADR_BLOCK106_BILL6_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF3*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 166              0x01010307, ADR_BLOCK107_BILL7_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF3*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 167              0x01010308, ADR_BLOCK108_BILL8_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF3*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 168              0x01010309, ADR_BLOCK109_BILL9_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF3*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 169              0x0101030A, ADR_BLOCK110_BILL10_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF3*LEN_MMD_UNIT),       EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 170              0x0101030B, ADR_BLOCK111_BILL11_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF3*LEN_MMD_UNIT),       EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 171              0x0101030C, ADR_BLOCK112_BILL12_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF3*LEN_MMD_UNIT),       EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 172                  //–Ë¡ø F4  //
 173                  0x01010400,     ADR_BLOCK01_MMD_L0_E2P+(TARIFF4*LEN_MMD_UNIT), EN_R+P_E2P1,8,16,//µ±«∞–Ë¡ø¿‡ ˝æ› 3+5 –Ë¡ø+ ±º
             -‰
 174              0x01010401, ADR_BLOCK101_BILL1_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF4*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 175              0x01010402, ADR_BLOCK102_BILL2_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF4*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 176              0x01010403, ADR_BLOCK103_BILL3_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF4*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 177              0x01010404, ADR_BLOCK104_BILL4_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF4*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 178              0x01010405, ADR_BLOCK105_BILL5_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF4*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 6   

 179              0x01010406, ADR_BLOCK106_BILL6_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF4*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 180              0x01010407, ADR_BLOCK107_BILL7_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF4*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 181              0x01010408, ADR_BLOCK108_BILL8_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF4*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 182              0x01010409, ADR_BLOCK109_BILL9_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF4*LEN_MMD_UNIT),        EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 183              0x0101040A, ADR_BLOCK110_BILL10_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF4*LEN_MMD_UNIT),       EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 184              0x0101040B, ADR_BLOCK111_BILL11_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF4*LEN_MMD_UNIT),       EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 185              0x0101040C, ADR_BLOCK112_BILL12_DATA_E2P+OFFSET_bill_data_mmd+(TARIFF4*LEN_MMD_UNIT),       EN_R+P_E2P1+CM_B
             -ILL,8,16,//…œ1‘¬–Ë¡ø¿‡
 186          ///////////////////‘¬Ω·À„ ±º‰µ„ ˝æ›///////////////////////////////////////////////////////////////////////
             -/////////
 187              0x03700101, ADR_BLOCK101_BILL1_DATA_E2P+(OFFSET_bill_data_dateTime),        EN_R+P_E2P1+CM_BILL ,6,12,      //…œ1‘
             -¬Ω·À„ ±º‰µ„º«¬º//
 188              0x03700102, ADR_BLOCK102_BILL2_DATA_E2P+(OFFSET_bill_data_dateTime),        EN_R+P_E2P1+CM_BILL ,6,12,      //…œ2‘
             -¬Ω·À„ ±º‰µ„º«¬º//
 189              0x03700103, ADR_BLOCK103_BILL3_DATA_E2P+(OFFSET_bill_data_dateTime),        EN_R+P_E2P1+CM_BILL ,6,12,      //…œ3‘
             -¬Ω·À„ ±º‰µ„º«¬º//
 190              0x03700104, ADR_BLOCK104_BILL4_DATA_E2P+(OFFSET_bill_data_dateTime),        EN_R+P_E2P1+CM_BILL ,6,12,      //…œ4‘
             -¬Ω·À„ ±º‰µ„º«¬º//
 191              0x03700105, ADR_BLOCK105_BILL5_DATA_E2P+(OFFSET_bill_data_dateTime),        EN_R+P_E2P1+CM_BILL ,6,12,      //…œ5‘
             -¬Ω·À„ ±º‰µ„º«¬º//
 192              0x03700106, ADR_BLOCK106_BILL6_DATA_E2P+(OFFSET_bill_data_dateTime),        EN_R+P_E2P1+CM_BILL ,6,12,      //…œ6‘
             -¬Ω·À„ ±º‰µ„º«¬º//
 193              0x03700107, ADR_BLOCK107_BILL7_DATA_E2P+(OFFSET_bill_data_dateTime),        EN_R+P_E2P1+CM_BILL ,6,12,      //…œ7‘
             -¬Ω·À„ ±º‰µ„º«¬º//
 194              0x03700108, ADR_BLOCK108_BILL8_DATA_E2P+(OFFSET_bill_data_dateTime),        EN_R+P_E2P1+CM_BILL ,6,12,      //…œ8‘
             -¬Ω·À„ ±º‰µ„º«¬º//
 195              0x03700109, ADR_BLOCK109_BILL9_DATA_E2P+(OFFSET_bill_data_dateTime),        EN_R+P_E2P1+CM_BILL ,6,12,      //…œ9‘
             -¬Ω·À„ ±º‰µ„º«¬º//
 196              0x0370010A, ADR_BLOCK110_BILL10_DATA_E2P+(OFFSET_bill_data_dateTime),       EN_R+P_E2P1+CM_BILL ,6,12,      //…œ1
             -0‘¬Ω·À„ ±º‰µ„º«¬º//
 197              0x0370010B, ADR_BLOCK111_BILL11_DATA_E2P+(OFFSET_bill_data_dateTime),       EN_R+P_E2P1+CM_BILL ,6,12,      //…œ1
             -1‘¬Ω·À„ ±º‰µ„º«¬º//
 198              0x0370010C, ADR_BLOCK112_BILL12_DATA_E2P+(OFFSET_bill_data_dateTime),       EN_R+P_E2P1+CM_BILL ,6,12,      //…œ1
             -2‘¬Ω·À„ ±º‰µ„º«¬º//
 199          //////////////////////////////////////////////////////////////////////////////////////////////////////////
             -///////////
 200              //±‰¡ø ˝æ›  //
 201              0x02010000,&gs_measure_var_data.gs_really[0].dw_u_val.B08[0],       EN_R+P_RAM,     2,4,    //∫œœ‡µÁ—π xxx.x                 YYY
 202              0x02010100,&gs_measure_var_data.gs_really[0].dw_u_val.B08[0],       EN_R+P_RAM,     2,4,    //Aœ‡µÁ—π xxx.x          YYY
 203              0x02020000,&gs_measure_var_data.gs_really[0].dw_i_val.B08[0],       EN_R+P_RAM,     3,6,    //∫œœ‡µÁ¡˜   XXX.XXX
 204              0x02020100,&gs_measure_var_data.gs_really[0].dw_i_val.B08[0],       EN_R+P_RAM,     3,6,    //Aœ‡µÁ¡˜   XXX.XXX
 205              0x02030000,&gs_measure_var_data.gs_really[0].dw_p_val.B08[0],     EN_R+P_RAM,       3,6,    // TOTAL ACTIVE POW
             -ER   XX.XXXX 
 206              0x02030100,&gs_measure_var_data.gs_really[0].dw_p_val.B08[0],     EN_R+P_RAM,       3,6,    // Aœ‡ ACTIVE POWER
             -   XX.XXXX 
 207              0x02060000,&gs_measure_var_data.gs_really[0].dw_pf_val.B08[0],       EN_R+P_RAM,2,4,        //∫œœ‡π¶¬ “Ú ˝  X.XXX
 208              0x02060100,&gs_measure_var_data.gs_really[0].dw_pf_val.B08[0],       EN_R+P_RAM,2,4,        // Aœ‡π¶¬ “Ú ˝  X.XXX
 209              0x02800002,&gs_measure_var_data.gs_really[0].w_freq_val.B08[0],    EN_R+P_RAM,2,4,  //∆µ¬   XX.XX
 210              0x02800003,&gs_md_var.min_var[0].val_min,    EN_R+P_RAM,3,6,        //µ±«∞∑÷÷”–Ë¡ø ˝æ› XX.XXXX 
 211              0x02800006,&gs_measure_var_data.w_temp.B08[0],    EN_R+P_RAM,2,4,   //Œ¬∂» XX.XX
 212              0x02800007,&gs_measure_var_data.w_bat_v.B08[0],    EN_R+P_RAM,2,4,  //µÁ≥ÿµÁ—πXX.XX
 213              0x02900001,&gs_current_triff_var.triff_No,    EN_R+P_RAM,1,2,       //µ±«∞∑—¬  1~4//
 214              0x02900002,&gs_current_triff_var.dayTab_No,    EN_R+P_RAM,1,2,      //µ±«∞∑—¬  1~4//
 215              0x02900003,&gs_current_triff_var.weekTab_No,    EN_R+P_RAM,1,2,     //µ±«∞∑—¬  1~4//
 216              0x02900004,&gs_current_triff_var.seasonTab_No,    EN_R+P_RAM,1,2,   //µ±«∞∑—¬  1~4//
 217          
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 7   

 218          
 219              // “ª¿‡ ¬º˛  //
 220              //–Ë¡ø∏¥Œª   //
 221              0x03500000, ADR_BLOCK151_EVENI_resetMD_E2P,                 EN_R+P_E2P1,    2,4,    //◊‹¥Œ ˝//
 222              0x03500101, ADR_BLOCK151_EVENI_resetMD_E2P+2,                      EN_R+P_E2P1+CM_EBIL, 4,8, //◊ÓΩ¸1¥Œµµ∞∏º«¬º∑¢…˙ 
             -±º‰//
 223              0x03500102, (ADR_BLOCK151_EVENI_resetMD_E2P+2+ 1*4),        EN_R+P_E2P1+CM_EBIL, 4,8,//◊ÓΩ¸2¥Œµµ∞∏º«¬º∑¢…˙ ±º
             -‰//
 224              0x03500103, (ADR_BLOCK151_EVENI_resetMD_E2P+2+ 2*4),        EN_R+P_E2P1+CM_EBIL, 4,8,//◊ÓΩ¸3¥Œµµ∞∏º«¬º∑¢…˙ ±º
             -‰//
 225              0x03500104, (ADR_BLOCK151_EVENI_resetMD_E2P+2+ 3*4),        EN_R+P_E2P1+CM_EBIL, 4,8,//◊ÓΩ¸4¥Œµµ∞∏º«¬º∑¢…˙ ±º
             -‰//
 226              0x03500105, (ADR_BLOCK151_EVENI_resetMD_E2P+2+ 4*4),        EN_R+P_E2P1+CM_EBIL, 4,8,//◊ÓΩ¸5¥Œµµ∞∏º«¬º∑¢…˙ ±º
             -‰//
 227              0x03500106, (ADR_BLOCK151_EVENI_resetMD_E2P+2+ 5*4),        EN_R+P_E2P1+CM_EBIL, 4,8,//◊ÓΩ¸6¥Œµµ∞∏º«¬º∑¢…˙ ±º
             -‰//
 228              0x03500107, (ADR_BLOCK151_EVENI_resetMD_E2P+2+ 6*4),        EN_R+P_E2P1+CM_EBIL, 4,8,//◊ÓΩ¸7¥Œµµ∞∏º«¬º∑¢…˙ ±º
             -‰//
 229              0x03500108, (ADR_BLOCK151_EVENI_resetMD_E2P+2+ 7*4),        EN_R+P_E2P1+CM_EBIL, 4,8,//◊ÓΩ¸8¥Œµµ∞∏º«¬º∑¢…˙ ±º
             -‰//
 230              0x03500109, (ADR_BLOCK151_EVENI_resetMD_E2P+2+ 8*4),        EN_R+P_E2P1+CM_EBIL, 4,8,//◊ÓΩ¸9¥Œµµ∞∏º«¬º∑¢…˙ ±º
             -‰//
 231              0x0350010A, (ADR_BLOCK151_EVENI_resetMD_E2P+2+ 9*4),        EN_R+P_E2P1+CM_EBIL, 4,8,//◊ÓΩ¸10¥Œµµ∞∏º«¬º∑¢…˙ ±
             -º‰//
 232          
 233              //Õ®—∂±‡≥Ã//
 234              0x03520000,  ADR_BLOCK150_EVENI_PROG_E2P,                   EN_R+P_E2P1,    2,4,    //◊‹¥Œ ˝//
 235              0x03520101,  ADR_BLOCK150_EVENI_PROG_E2P+2,         EN_R+P_E2P1+CM_EBIL, 4,8, //◊ÓΩ¸1¥Œµµ∞∏º«¬º∑¢…˙ ±º‰//
 236              0x03520102,  (ADR_BLOCK150_EVENI_PROG_E2P+2+ 1*4),  EN_R+P_E2P1+CM_EBIL, 4,8,//◊ÓΩ¸2¥Œµµ∞∏º«¬º∑¢…˙ ±º‰/
             -/
 237              0x03520103,  (ADR_BLOCK150_EVENI_PROG_E2P+2+ 2*4),  EN_R+P_E2P1+CM_EBIL, 4,8,//◊ÓΩ¸3¥Œµµ∞∏º«¬º∑¢…˙ ±º‰/
             -/
 238              0x03520104,  (ADR_BLOCK150_EVENI_PROG_E2P+2+ 3*4),  EN_R+P_E2P1+CM_EBIL, 4,8,//◊ÓΩ¸4¥Œµµ∞∏º«¬º∑¢…˙ ±º‰/
             -/
 239              0x03520105,  (ADR_BLOCK150_EVENI_PROG_E2P+2+ 4*4),  EN_R+P_E2P1+CM_EBIL, 4,8,//◊ÓΩ¸5¥Œµµ∞∏º«¬º∑¢…˙ ±º‰/
             -/
 240              0x03520106,  (ADR_BLOCK150_EVENI_PROG_E2P+2+ 5*4),  EN_R+P_E2P1+CM_EBIL, 4,8,//◊ÓΩ¸6¥Œµµ∞∏º«¬º∑¢…˙ ±º‰/
             -/
 241              0x03520107,  (ADR_BLOCK150_EVENI_PROG_E2P+2+ 6*4),  EN_R+P_E2P1+CM_EBIL, 4,8,//◊ÓΩ¸7¥Œµµ∞∏º«¬º∑¢…˙ ±º‰/
             -/
 242              0x03520108,  (ADR_BLOCK150_EVENI_PROG_E2P+2+ 7*4),  EN_R+P_E2P1+CM_EBIL, 4,8,//◊ÓΩ¸8¥Œµµ∞∏º«¬º∑¢…˙ ±º‰/
             -/
 243              0x03520109,  (ADR_BLOCK150_EVENI_PROG_E2P+2+ 8*4),  EN_R+P_E2P1+CM_EBIL, 4,8,//◊ÓΩ¸9¥Œµµ∞∏º«¬º∑¢…˙ ±º‰/
             -/
 244              0x0352010A,  (ADR_BLOCK150_EVENI_PROG_E2P+2+ 9*4),  EN_R+P_E2P1+CM_EBIL, 4,8,//◊ÓΩ¸10¥Œµµ∞∏º«¬º∑¢…˙ ±º‰
             -//
 245          
 246              // ±÷”–£◊º
 247              0x03570000,  ADR_BLOCK152_EVENI_setRtc_E2P,                 EN_R+P_E2P1,    2,4,    //◊‹¥Œ ˝//
 248              0x03570101,  ADR_BLOCK152_EVENI_setRtc_E2P+2,                       EN_R+P_E2P1+CM_EBIL, 4,8,  //◊ÓΩ¸1¥Œµµ∞∏º«¬º∑¢…˙ ±
             -º‰//
 249              0x03570102,  (ADR_BLOCK152_EVENI_setRtc_E2P+2+ 1*4),        EN_R+P_E2P1+CM_EBIL, 4,8, //◊ÓΩ¸2¥Œµµ∞∏º«¬º∑¢…˙ ±
             -º‰//
 250              0x03570103,  (ADR_BLOCK152_EVENI_setRtc_E2P+2+ 2*4),        EN_R+P_E2P1+CM_EBIL, 4,8, //◊ÓΩ¸3¥Œµµ∞∏º«¬º∑¢…˙ ±
             -º‰//
 251              0x03570104,  (ADR_BLOCK152_EVENI_setRtc_E2P+2+ 3*4),        EN_R+P_E2P1+CM_EBIL, 4,8, //◊ÓΩ¸4¥Œµµ∞∏º«¬º∑¢…˙ ±
             -º‰//
 252              0x03570105,  (ADR_BLOCK152_EVENI_setRtc_E2P+2+ 4*4),        EN_R+P_E2P1+CM_EBIL, 4,8, //◊ÓΩ¸5¥Œµµ∞∏º«¬º∑¢…˙ ±
             -º‰//
 253              0x03570106,  (ADR_BLOCK152_EVENI_setRtc_E2P+2+ 5*4),        EN_R+P_E2P1+CM_EBIL, 4,8, //◊ÓΩ¸6¥Œµµ∞∏º«¬º∑¢…˙ ±
             -º‰//
 254              0x03570107,  (ADR_BLOCK152_EVENI_setRtc_E2P+2+ 6*4),        EN_R+P_E2P1+CM_EBIL, 4,8, //◊ÓΩ¸7¥Œµµ∞∏º«¬º∑¢…˙ ±
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 8   

             -º‰//
 255              0x03570108,  (ADR_BLOCK152_EVENI_setRtc_E2P+2+ 7*4),        EN_R+P_E2P1+CM_EBIL, 4,8, //◊ÓΩ¸8¥Œµµ∞∏º«¬º∑¢…˙ ±
             -º‰//
 256              0x03570109,  (ADR_BLOCK152_EVENI_setRtc_E2P+2+ 8*4),        EN_R+P_E2P1+CM_EBIL, 4,8, //◊ÓΩ¸9¥Œµµ∞∏º«¬º∑¢…˙ ±
             -º‰//
 257              0x0357010A,  (ADR_BLOCK152_EVENI_setRtc_E2P+2+ 9*4),        EN_R+P_E2P1+CM_EBIL, 4,8, //◊ÓΩ¸10¥Œµµ∞∏º«¬º∑¢…˙ 
             -±º‰//
 258          
 259             //µÁ≥ÿ«∑—π Ãÿ ‚¥¶¿Ì  ÷ª≥≠∂¡∑¢…˙ ±º‰//        
 260                  0x03590000,   ADR_BLOCK162_EVENII_lowbattery_E2P,            EN_R+P_E2P1, 2,4,  //◊‹¥Œ ˝
 261                  0x03590001,   ADR_BLOCK162_EVENII_lowbattery_E2P+2,          EN_R+P_E2P1, 4,8,  //¿€º∆ ±º‰
 262                  0x03590101,   ADR_BLOCK162_EVENII_lowbattery_E2P+6,                  EN_R+P_E2P1+CM_EBIL, 12,24,         //◊ÓΩ¸“ª¥Œµµ∞∏º«¬º
             -   ¬º˛¥˙¬Î ø™ º ±º‰ Ω· ¯ ±º‰
 263                  0x03590102,  (ADR_BLOCK162_EVENII_lowbattery_E2P+6+ 1*6),        EN_R+P_E2P1+CM_EBIL, 12,24,///◊ÓΩ¸∂˛¥Œµµ∞∏º«¬º
             -   ¬º˛¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 264                  0x03590103,  (ADR_BLOCK162_EVENII_lowbattery_E2P+6+ 2*6),        EN_R+P_E2P1+CM_EBIL, 12,24,///◊ÓΩ¸»˝¥Œµµ∞∏º«¬º
             -   ¬º˛¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 265                  0x03590104,  (ADR_BLOCK162_EVENII_lowbattery_E2P+6+ 3*6),        EN_R+P_E2P1+CM_EBIL, 12,24,///◊ÓΩ¸∂˛¥Œµµ∞∏º«¬º
             -   ¬º˛¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 266                  0x03590105,  (ADR_BLOCK162_EVENII_lowbattery_E2P+6+ 4*6),        EN_R+P_E2P1+CM_EBIL, 12,24,///◊ÓΩ¸»˝¥Œµµ∞∏º«¬º
             -   ¬º˛¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 267                  0x03590106,  (ADR_BLOCK162_EVENII_lowbattery_E2P+6+ 5*6),        EN_R+P_E2P1+CM_EBIL, 12,24,///◊ÓΩ¸∂˛¥Œµµ∞∏º«¬º
             -   ¬º˛¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 268                  0x03590107,  (ADR_BLOCK162_EVENII_lowbattery_E2P+6+ 6*6),        EN_R+P_E2P1+CM_EBIL, 12,24,//◊ÓΩ¸»˝¥Œµµ∞∏º«¬º 
             -  ¬º˛¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 269                  0x03590108,  (ADR_BLOCK162_EVENII_lowbattery_E2P+6+ 7*6),        EN_R+P_E2P1+CM_EBIL, 12,24,///◊ÓΩ¸∂˛¥Œµµ∞∏º«¬º
             -   ¬º˛¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 270                  0x03590109,  (ADR_BLOCK162_EVENII_lowbattery_E2P+6+ 8*6),        EN_R+P_E2P1+CM_EBIL, 12,24,///◊ÓΩ¸»˝¥Œµµ∞∏º«¬º
             -   ¬º˛¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 271                  0x0359010A,  (ADR_BLOCK162_EVENII_lowbattery_E2P+6+ 9*6),        EN_R+P_E2P1+CM_EBIL, 12,24,//◊ÓΩ¸∂˛¥Œµµ∞∏º«¬º 
             -  ¬º˛¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 272          
 273          //      0x0359FFFF,  ADR_BLOCK162_EVENII_lowbattery_E2P+6,               EN_R+P_E2P1, 60,120,//ø™ ºº«¬º  6*10¥Œ
 274                  
 275                  // µÁ‘¥µÙµÁ  // 
 276                  0x03380000,  ADR_BLOCK161_EVENII_PWN_E2P,                      EN_R+P_E2P1,     2,4,    //◊‹¥Œ ˝
 277                  0x03380001,  ADR_BLOCK161_EVENII_PWN_E2P+2,                  EN_R+P_E2P1,       4,8,    //¿€º∆ ±º‰
 278                  0x03380101,  ADR_BLOCK161_EVENII_PWN_E2P+6,                     EN_R+P_E2P1+CM_EBIL, 12,24,              //◊ÓΩ¸“ª¥Œµµ∞∏º«¬º   
             -¬º˛¥˙¬Î ø™ º ±º‰ Ω· ¯ ±º‰
 279                  0x03380102,  (ADR_BLOCK161_EVENII_PWN_E2P+6+ 1*6),       EN_R+P_E2P1+CM_EBIL, 12,24, ///◊ÓΩ¸∂˛¥Œµµ∞∏º«¬º   ¬º˛
             -¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 280                  0x03380103,  (ADR_BLOCK161_EVENII_PWN_E2P+6+ 2*6),       EN_R+P_E2P1+CM_EBIL, 12,24, ///◊ÓΩ¸»˝¥Œµµ∞∏º«¬º   ¬º˛
             -¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 281                  0x03380104,  (ADR_BLOCK161_EVENII_PWN_E2P+6+ 3*6),       EN_R+P_E2P1+CM_EBIL, 12,24, ///◊ÓΩ¸∂˛¥Œµµ∞∏º«¬º   ¬º˛
             -¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 282                  0x03380105,  (ADR_BLOCK161_EVENII_PWN_E2P+6+ 4*6),        EN_R+P_E2P1+CM_EBIL, 12,24, ///◊ÓΩ¸»˝¥Œµµ∞∏º«¬º   ¬º
             -˛¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 283                  0x03380106,  (ADR_BLOCK161_EVENII_PWN_E2P+6+ 5*6),        EN_R+P_E2P1+CM_EBIL, 12,24, ///◊ÓΩ¸∂˛¥Œµµ∞∏º«¬º   ¬º
             -˛¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 284                  0x03380107,  (ADR_BLOCK161_EVENII_PWN_E2P+6+ 6*6),       EN_R+P_E2P1+CM_EBIL, 12,24, //◊ÓΩ¸»˝¥Œµµ∞∏º«¬º   ¬º˛¥
             -˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 285                  0x03380108,  (ADR_BLOCK161_EVENII_PWN_E2P+6+ 7*6),        EN_R+P_E2P1+CM_EBIL, 12,24, ///◊ÓΩ¸∂˛¥Œµµ∞∏º«¬º   ¬º
             -˛¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 286                  0x03380109,  (ADR_BLOCK161_EVENII_PWN_E2P+6+ 8*6),        EN_R+P_E2P1+CM_EBIL, 12,24, ///◊ÓΩ¸»˝¥Œµµ∞∏º«¬º   ¬º
             -˛¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 287                  0x0338010A,  (ADR_BLOCK161_EVENII_PWN_E2P+6+ 9*6),        EN_R+P_E2P1+CM_EBIL, 12,24, ///◊ÓΩ¸∂˛¥Œµµ∞∏º«¬º   ¬º
             -˛¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 288          
 289                  //COVER_//
 290                  0x03450000,  ADR_BLOCK163_EVENII_COVER_E2P,           EN_R+P_E2P1,      2,4,    //◊‹¥Œ ˝
 291                  0x03450001,  ADR_BLOCK163_EVENII_COVER_E2P+2,         EN_R+P_E2P1,      4,8,    //◊‹¥Œ ˝
 292                  0x03450101,  ADR_BLOCK163_EVENII_COVER_E2P+6,                 EN_R+P_E2P1+CM_EBIL, 12,24,                //◊ÓΩ¸“ª¥Œµµ∞∏º«¬º   ¬
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 9   

             -º˛¥˙¬Î ø™ º ±º‰ Ω· ¯ ±º‰
 293                  0x03450102,  (ADR_BLOCK163_EVENII_COVER_E2P+6+ 1*6),     EN_R+P_E2P1+CM_EBIL, 12,24,///◊ÓΩ¸∂˛¥Œµµ∞∏º«¬º   ¬º
             -˛¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 294                  0x03450103,  (ADR_BLOCK163_EVENII_COVER_E2P+6+ 2*6),     EN_R+P_E2P1+CM_EBIL, 12,24,///◊ÓΩ¸»˝¥Œµµ∞∏º«¬º   ¬º
             -˛¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 295                  0x03450104,  (ADR_BLOCK163_EVENII_COVER_E2P+6+ 3*6),     EN_R+P_E2P1+CM_EBIL, 12,24,///◊ÓΩ¸∂˛¥Œµµ∞∏º«¬º   ¬º
             -˛¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 296                  0x03450105,  (ADR_BLOCK163_EVENII_COVER_E2P+6+ 4*6),  EN_R+P_E2P1+CM_EBIL, 12,24,///◊ÓΩ¸»˝¥Œµµ∞∏º«¬º   ¬º
             -˛¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 297                  0x03450106,  (ADR_BLOCK163_EVENII_COVER_E2P+6+ 5*6),     EN_R+P_E2P1+CM_EBIL, 12,24,///◊ÓΩ¸∂˛¥Œµµ∞∏º«¬º   ¬º
             -˛¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 298                  0x03450107,  (ADR_BLOCK163_EVENII_COVER_E2P+6+ 6*6),  EN_R+P_E2P1+CM_EBIL, 12,24,///◊ÓΩ¸»˝¥Œµµ∞∏º«¬º   ¬º
             -˛¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 299                  0x03450108,  (ADR_BLOCK163_EVENII_COVER_E2P+6+ 7*6),     EN_R+P_E2P1+CM_EBIL, 12,24,///◊ÓΩ¸∂˛¥Œµµ∞∏º«¬º   ¬º
             -˛¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 300                  0x03450109,  (ADR_BLOCK163_EVENII_COVER_E2P+6+ 8*6),     EN_R+P_E2P1+CM_EBIL, 12,24,///◊ÓΩ¸»˝¥Œµµ∞∏º«¬º   ¬º
             -˛¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 301                  0x0345010A,  (ADR_BLOCK163_EVENII_COVER_E2P+6+ 9*6),     EN_R+P_E2P1+CM_EBIL, 12,24,///◊ÓΩ¸∂˛¥Œµµ∞∏º«¬º   ¬º
             -˛¥˙¬Î  ø™ º ±º‰ Ω· ¯ ±º‰
 302          
 303          // π¶¬ ∑¥œÚ ¬º˛  //     
 304                  0x03360000,  ADR_BLOCK164_EVENII_L1reverse_E2P,                       EN_R+P_E2P1,      2,4,    //◊‹¥Œ ˝
 305                  0x03360001, ( ADR_BLOCK164_EVENII_L1reverse_E2P+2),                EN_R+P_E2P1,         4,8,    //◊‹¿€º∆ ±º‰//
 306                  0x03360101,  (ADR_BLOCK164_EVENII_L1reverse_E2P+6),                EN_R+P_E2P1+CM_EBIL,         12,24,  //ø™ º ±º
             -‰+Ω· ¯ ±º‰//
 307                  0x03360102, ( ADR_BLOCK164_EVENII_L1reverse_E2P+6+1*6),         EN_R+P_E2P1+CM_EBIL,    12,24,  //ø™ º ±º‰+Ω
             -· ¯ ±º‰//
 308                  0x03360103,  (ADR_BLOCK164_EVENII_L1reverse_E2P+6+2*6),         EN_R+P_E2P1+CM_EBIL,    12,24,  //ø™ º ±º‰+Ω
             -· ¯ ±º‰//
 309                  0x03360104, ( ADR_BLOCK164_EVENII_L1reverse_E2P+6+3*6),         EN_R+P_E2P1+CM_EBIL,    12,24,  //ø™ º ±º‰+Ω
             -· ¯ ±º‰//
 310                  0x03360105, ( ADR_BLOCK164_EVENII_L1reverse_E2P+6+4*6),         EN_R+P_E2P1+CM_EBIL,    12,24,  //ø™ º ±º‰+Ω
             -· ¯ ±º‰//
 311                  0x03360106, ( ADR_BLOCK164_EVENII_L1reverse_E2P+6+5*6),         EN_R+P_E2P1+CM_EBIL,    12,24,  //ø™ º ±º‰+Ω
             -· ¯ ±º‰//
 312                  0x03360107,  (ADR_BLOCK164_EVENII_L1reverse_E2P+6+6*6),         EN_R+P_E2P1+CM_EBIL,    12,24,  //ø™ º ±º‰+Ω
             -· ¯ ±º‰//
 313                  0x03360108, ( ADR_BLOCK164_EVENII_L1reverse_E2P+6+7*6),         EN_R+P_E2P1+CM_EBIL,    12,24,  //ø™ º ±º‰+Ω
             -· ¯ ±º‰//
 314                  0x03360109, ( ADR_BLOCK164_EVENII_L1reverse_E2P+6+8*6),         EN_R+P_E2P1+CM_EBIL,    12,24,  //ø™ º ±º‰+Ω
             -· ¯ ±º‰//
 315                  0x0336010A,  (ADR_BLOCK164_EVENII_L1reverse_E2P+6+9*6),         EN_R+P_E2P1+CM_EBIL,    12,24,  //ø™ º ±º‰+Ω
             -· ¯ ±º‰//
 316          
 317          
 318          //
 319              0x04000100,&gs_CurDateTime.Week,                            EN_RW+P_RAM,7,14,       //◊¢“‚»’∆⁄£¨Õ®—∂∂¡–¥À≥–Ú YYMMDDWWhhmmss
 320              0x04000103,ADR_METER_PARAM1_MD,                            EN_RW+P_E2P1,    2,      4,      //◊Ó¥Û–Ë¡ø÷‹∆⁄,ª¨≤Ó ±º‰//
 321          
 322              0x04000801,ADR_BLOCK83_WEEK_TAB_E2P ,                       EN_RW+P_E2P1,LEN_WEEK_TABLE_ONE,(2*LEN_WEEK_TABLE_ONE), //÷‹±Ì
             -∆ ºµÿ÷∑(4∏ˆ÷‹±Ì)     
 323              0x04000802,ADR_BLOCK83_WEEK_TAB_E2P+(1*LEN_WEEK_TABLE_ONE),         EN_RW+P_E2P1,LEN_WEEK_TABLE_ONE,(2*LEN_WE
             -EK_TABLE_ONE),        //÷‹±Ì∆ ºµÿ÷∑(4∏ˆ÷‹±Ì)
 324              0x04000803,ADR_BLOCK83_WEEK_TAB_E2P+(2*LEN_WEEK_TABLE_ONE),         EN_RW+P_E2P1,LEN_WEEK_TABLE_ONE,(2*LEN_WE
             -EK_TABLE_ONE),        //÷‹±Ì∆ ºµÿ÷∑(4∏ˆ÷‹±Ì)
 325              0x04000804,ADR_BLOCK83_WEEK_TAB_E2P+(3*LEN_WEEK_TABLE_ONE),         EN_RW+P_E2P1,LEN_WEEK_TABLE_ONE,(2*LEN_WE
             -EK_TABLE_ONE),        //÷‹±Ì∆ ºµÿ÷∑(4∏ˆ÷‹±Ì) 
 326           
 327                  0x04010000,ADR_BLOCK82_SEASON_TAB_E2P,               EN_RW+P_E2P1,LEN_SEASON_TABLE, (2*LEN_SEASON_TABLE), 
             -   // ºæΩ⁄±Ì 8*3  ‘¬»’+÷‹±Ì∫≈
 328                  0x04010001,ADR_BLOCK84_DAY_TAB_E2P,                             EN_RW+P_E2P1,LEN_DAY_TABLE_ONE, (2*LEN_DAY_TABLE_ONE),// ±∂Œ±Ì1   
             -±∂Œ±Ì∆ ºµÿ÷∑(8∏ˆ ±∂Œ±Ì£¨10∏ˆ ±∂Œ ˝)  288      BCD  hhnnNN          
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 10  

 329                  0x04010002,ADR_BLOCK84_DAY_TAB_E2P+(1*LEN_DAY_TABLE_ONE),               EN_RW+P_E2P1,LEN_DAY_TABLE_ONE, (2*LEN_DAY_TAB
             -LE_ONE),// ±∂Œ±Ì2   ±∂Œ±Ì∆ ºµÿ÷∑(8∏ˆ ±∂Œ±Ì£¨10∏ˆ ±∂Œ ˝)  288      BCD  hhnnNN          
 330                  0x04010003,ADR_BLOCK84_DAY_TAB_E2P+(2*LEN_DAY_TABLE_ONE),               EN_RW+P_E2P1,LEN_DAY_TABLE_ONE, (2*LEN_DAY_TAB
             -LE_ONE),// ±∂Œ±Ì3   ±∂Œ±Ì∆ ºµÿ÷∑(8∏ˆ ±∂Œ±Ì£¨10∏ˆ ±∂Œ ˝)  288      BCD  hhnnNN          
 331                  0x04010004,ADR_BLOCK84_DAY_TAB_E2P+(3*LEN_DAY_TABLE_ONE),               EN_RW+P_E2P1,LEN_DAY_TABLE_ONE, (2*LEN_DAY_TAB
             -LE_ONE),// ±∂Œ±Ì4   ±∂Œ±Ì∆ ºµÿ÷∑(8∏ˆ ±∂Œ±Ì£¨10∏ˆ ±∂Œ ˝)  288      BCD  hhnnNN          
 332          
 333                  0x04000401,ADR_METER_PARAM1_METER_ID,                   EN_RW+P_E2P1,16,32,     //Õ®—∂µÿ÷∑ ±Ì∫≈
 334          
 335                  0x04000409,&sys_parm.meter_cons[0],                             EN_R+P_RAM,3,6,         //≥£ ˝   //             
 336          
 337                  0x04000B01,ADR_METER_PARAM1_SETL_DDHH,          EN_RW+P_E2P1,2,4,       //Ω·À„»’
 338                  0x04000C01,ADR_METER_PARAM1_PW0,                    EN_W+P_E2P1,4,8,            //0º∂√‹¬Î
 339          
 340              0x04000A01,  ADR_METER_PARAM1_load_lptime_inv_var,          EN_RW+P_E2P1,2,4,//º«¬ºº‰∏Ù
 341              0x04000AA1,  ADR_METER_PARAM1_load_egcode_var,            EN_RW+P_E2P1,10,20, //∏∫∫…±Ì±‡¬Î
 342              0x06010000,  &LPRunPa.Num[0],                                   EN_R+P_RAM,2,4, //“—º«¬ºÃı ˝
 343                  
 344                  //œ‘ æ¿‡≤Œ ˝//
 345              0x04000302,ADR_DIS_PARAM_AUTO_SEC,          EN_RW+P_E2P1,1,2,    //◊‘∂Ø—≠œ‘ ±º‰ 
 346              0x04000303,ADR_DIS_PARAM_EC_FORM,            EN_RW+P_E2P1,1,2,    // µÁ¡øœ‘ æŒª ˝//
 347              0x04000310,ADR_DIS_PARAM_BG_SEC,                     EN_RW+P_E2P1,1,2,      //±≥π‚µ„¡¡ ±º‰,BCD sec
 348              0x040003A0,ADR_DIS_PARAM_KEY_SEC,                    EN_RW+P_E2P1,1,2,    //º¸œ‘ ±º‰
 349              0x04040100,ADR_DIS_PARAM_AUTO_TAB,           EN_RW+P_E2P1,11,22,    //◊‘∂Ø—≠œ‘±Ì  //
 350              0x04040200,ADR_DIS_PARAM_KEY_TAB,                  EN_RW+P_E2P1,11,22,      //∞¥º¸œ‘ æ¡–±Ì //
 351              0x04040300,ADR_DIS_PARAM_PWN_TAB,            EN_RW+P_E2P1,10,20,    //œ¬µÁœ‘ æ¡–±Ì//
 352          
 353              0x04800001,&sys_parm.video[0],                                              EN_R+P_RAM,12,12,  //»Ìº˛∞Ê±æ∫≈(ASCII)
 354          
 355          /*      //–£±Ì≤Œ ˝
 356              0x80800101,&Adjust_Param.SCP_adj_val.B08[0],         EN_RW+P_RAM+W_FCT,4,8,// E1 π¶¬ ±»≤Óºƒ¥Ê∆˜  // 
 357              0x80800102,&Adjust_Param.SCQ_adj_val.B08[0],     EN_RW+P_RAM+W_FCT,4,8,// E2 π¶¬ ±»≤Óºƒ¥Ê∆˜  //
 358              0x80800103,&Adjust_Param.SCU_adj_val.B08[0],        EN_RW+P_RAM+W_FCT,4,8,// µÁ—π”––ß÷µ ±»≤Óºƒ¥Ê∆˜//
 359              0x80800104,&Adjust_Param.SCI1_adj_val.B08[0],       EN_RW+P_RAM+W_FCT,4,8,// IA µÁ¡˜”––ß÷µ3.2M ±»≤Óºƒ¥Ê∆˜//
 360              0x80800105,&Adjust_Param.SCI2_adj_val.B08[0],       EN_RW+P_RAM+W_FCT,4,8,// IB µÁ¡˜”––ß÷µ3.2M ±»≤Óºƒ¥Ê∆˜   
             -//
 361              0x80800106,&Adjust_Param.PARAPC_adj_val.B08[0],             EN_RW+P_RAM+W_FCT,4,8,// E1 π¶¬ ±»≤Óºƒ¥Ê∆˜–°–≈∫≈≤π≥•÷
             -µ//
 362              0x80800107,&Adjust_Param.PARAQC_adj_val.B08[0],             EN_RW+P_RAM+W_FCT,4,8,// E2 π¶¬ ±»≤Óºƒ¥Ê∆˜–°–≈∫≈≤π≥•÷
             -µ//
 363              0x80800108,&Adjust_Param.PHCCTRL1_adj_val.B08[0],   EN_RW+P_RAM+W_FCT,4,8,// I1 Ω«≤Óµ˜Ω⁄ºƒ¥Ê∆˜  µº Œ™8Œª
             -  //
 364              0x80800109,&Adjust_Param.PHCCTRL2_adj_val.B08[0],   EN_RW+P_RAM+W_FCT,4,8,// I2 Ω«≤Óµ˜Ω⁄ºƒ¥Ê∆˜  µº Œ™8Œ
             -ª  //
 365          
 366          
 367                  //Õ®—∂≈˙¡ø–£±Ì//  
 368              0x0000FEB0, 0x0000,                                                 EN_W+P_E2P1+W_FCT,12,24,   //÷˜ªÿ¬∑ 1.0L IB ŒÛ≤Ó∫Õ”––ß÷µ–£◊º// 
 369              0x0000FEB1, 0x0000,                                                 EN_W+P_E2P1+W_FCT,12,24,   //÷˜ªÿ¬∑ 0.5L IB ŒÛ≤Ó–£◊º// 
 370              0x0000FEB2, 0x0000,                                                 EN_W+P_E2P1+W_FCT,12,24,          //¥Œªÿ¬∑1.0L IB ŒÛ≤Ó–£◊º// 
 371              0x0000FEB3, 0x0000,                                                 EN_W+P_E2P1+W_FCT,12,24,   //¥Œªÿ¬∑0.5L IB ŒÛ≤Ó–£◊º// 
 372              0x0000FEB4, 0x0000,                                                 EN_W+P_E2P1+W_FCT,12,24,  //¥Œªÿ¬∑0.5L IB ŒÛ≤Ó–£◊º// 
 373              0x0000FEB5, 0x0000,                                                 EN_W+P_E2P1+W_FCT,12,24,  //¥Œªÿ¬∑1.0L 5%IB ŒÛ≤Ó–£◊º// 
 374          */
 375          
 376              0x80800803,     0x0000,                                             EN_W+P_E2P1+W_FCT,2,4,// EMUº∆¡ø≤Œ ˝≥ı
             - ºªØ  // 
 377              
 378                  // «Â¡„//
 379              0x08020100,0x0000,                                                  EN_W+P_RAM,1,2,         //–Ë¡ø«Â¡„/ ÷∂Ø∏¥Œª
 380              0x08020200,0x0000,                                                  EN_W+P_RAM,1,2,         // ¬º˛º«¬º«Â¡„
 381                  0x08020300,0x0000,                                                  EN_W+P_RAM,1,2,                //=00 ∏∫∫…º«¬º«Â¡„  //
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 11  

 382              0x08020400,0x0000,                                                  EN_W+P_RAM,4,8,         //xxxxxxxx = 00000000 ±«Â≥˝µ±«∞∫Õ¿˙ ∑µÁ¡ø
 383              0x08020500,ADR_METER_PARAM1_FC_CFG,         EN_RW+P_E2P1,4,8,       //π§≥ß≥ˆ≥ß◊¥Ã¨◊÷£¨1◊÷Ω⁄  // 5A:≥ßƒ⁄   
 384              0x08020600,0x0000,                                                  EN_W+P_RAM,1,2,         //µÁƒ‹¬ˆ≥Âø⁄«–ªªøÿ÷∆√¸¡Ó°£=0X5A Œª√Î¬ˆ≥Â ‰≥ˆ  //
 385              0x04000107,ADR_METER_PARAM1_BAT_LEVEL,      EN_RW+P_E2P1,   1,      2,      // µÁ≥ÿµÕ—π∑ß÷µ  1 ◊÷Ω⁄£¨BCD  X.X 
 386          
 387              0x0000FEFF,0x0000,                                                  EN_W+P_RAM,2,4,         // ≥ı ºªØ
 388          };
 389          
 390          //---------------------------------------------------------------------//
 391          //π¶ƒ‹:   º∆À„”…∆ ºµÿ÷∑ø™ ºµΩFΩÿ÷πµƒ≥§∂»//
 392          //     0000F     return 4
 393          //      *Addr  ˝æ›∆ ºµÿ÷∑£¨num ˝æ›≥§∂»
 394          //---------------------------------------------------------------------//
 395          INT8U get_meter_id_asclen(INT8U *Addr,INT8U numbyte)
 396          {
 397   1              INT8U i;
 398   1              INT8U asclen=0;
 399   1              for(i=0;i<numbyte;i++)
 400   1              {
 401   2                      if((((*(Addr+i))>>4)&0x0F)==0x0F)
 402   2                      {
 403   3                              return asclen;
 404   3                      }
 405   2                      asclen++;
 406   2                      if(((*(Addr+i))&0x0F)==0x0F)
 407   2                      {
 408   3                              return asclen;
 409   3                      }
 410   2                      asclen++;
 411   2              }
 412   1              return asclen;
 413   1      }
 414          
 415          
 416          /*****************************************************************
 417           name:          INT8U  get_comm_var( INT16U id )
 418           function:      get command information precess  
 419           input:         no            
 420           return:        GetComVar()
 421                          =0    succeed  precess 
 422                          =1    fail precess 
 423          *****************************************************************/
 424          INT8U  get_IEC_comm_var( INT32U id )
 425          {
 426   1          INT16U i;  
 427   1              
 428   1        if((id>=0x06010001)&&(id<=0x060105A0))//∏∫∫… ˝æ›◊Ó∂‡º«¬º900Ãı   //SXL 2019-01-6
 429   1        {
 430   2                      comm_data.addr =0;
 431   2                      comm_data.Info.u16 = EN_R;              //≤ªƒ‹ªÚ…œ
 432   2                      comm_data.len = 0;
 433   2                      comm_data.len_asc = 0;
 434   2                      return TRUE;
 435   2        }
 436   1        if((id>=0x060A0001)&&(id<=0x060A0120))//∏∫∫… ˝æ›øÈ◊Ó∂‡º«¬º90Ãı   //SXL 2019-01-6
 437   1        {
 438   2                      comm_data.addr =0;
 439   2                      comm_data.Info.u16 = EN_R;              //≤ªƒ‹ªÚ…œ
 440   2                      comm_data.len = 0;
 441   2                      comm_data.len_asc = 0;
 442   2                      return TRUE;
 443   2        }
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 12  

 444   1      
 445   1                      for( i = 0 ; i <dim(IEC_ComDisTab) ; i++ )
 446   1          {
 447   2              if( id == IEC_ComDisTab[i].ComID )
 448   2              {
 449   3                  comm_data.addr = IEC_ComDisTab[i].Addr;
 450   3                  comm_data.Info.u16 = IEC_ComDisTab[i].ComInfo;
 451   3                  comm_data.len = IEC_ComDisTab[i].Len;
 452   3                  comm_data.len_asc = IEC_ComDisTab[i].Len_Asc;
 453   3                  return TRUE;
 454   3              }
 455   2          }
 456   1          return FALSE;
 457   1      }
 458          
 459          /*****************************************************************
 460           name:          uchar  GetComVar( uchar* Addr, uint* Info )
 461           function:      get command information precess  
 462           input:         no            
 463           return:        GetComVar()
 464                          =0    succeed  precess 
 465                          =1    fail precess 
 466          *****************************************************************/
 467          INT8U SecurityCK(void)
 468          {
 469   1              INT8U secType;
 470   1              secType = comm_data.Info.B08[0]&0x07; //»®œﬁºÏ≤‚//
 471   1              /*
 472   1              if(secType ==(W_FCT>>8))
 473   1              {
 474   1                      if(ADJA_KEY)    // 0 ∂ÃΩ” 1 Œ¥∂ÃΩ”
 475   1                      {
 476   1                              return (mmover);
 477   1                      }
 478   1              }
 479   1          */
 480   1              return (mmok);
 481   1      }
 482          
 483          //-------------------------------------------------------------------------------//
 484          //  Function:      INT8U IEC_Cmd_Password_Deal(INT8U* sptr,INT8U len) 
 485          //  Description:   iec Õ®—∂√‹¬Î÷∏¡Ó¥¶¿Ì≥Ã–Ú
 486          //  Parameters:    
 487          //  Returns:        Œﬁ                          
 488          //  Others:         
 489          //-------------------------------------------------------------------------------//
 490          INT8U IEC_Cmd_Password_Deal(INT8U* sptr)
 491          {
 492   1        INT8U tmp_8u_01[4];
 493   1        INT8U tmp_8u_02[8];
 494   1      
 495   1          if((gs_uart_iec_app_var[g_ch_comm].iec_status & (COMM_REQUIST_OK_IEC+COMM_INFO_OK_IEC)) != 0x03)   ret
             -urn(FALSE);
 496   1      
 497   1           mem_read(&tmp_8u_01[0], ADR_METER_PARAM1_PW0, 4, MEM_E2P1);
 498   1           Lib_BCD_AscA(&tmp_8u_02[0], &tmp_8u_01[0], 4);
 499   1               
 500   1      
 501   1          if(Lib_Cmp_TwoArry((sptr+5), &tmp_8u_02[0], 8) == 0x00)  
 502   1          {
 503   2               gs_uart_iec_app_var[g_ch_comm].iec_status |= COMM_MIMA_OK_IEC;  // ∏¯≥ˆ«Î«Û√¸¡Ó≥…π¶±Í ∂ //
 504   2               Get_ACK_Answer(sptr);
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 13  

 505   2               gs_uart_iec_app_var[g_ch_comm].len = 1;
 506   2               return TRUE;
 507   2          }
 508   1          else
 509   1          {
 510   2              if(Lib_Cmp_TwoArry((sptr+5), &Super_mima_iec[0], 8) == 0x00) 
 511   2              {
 512   3                  gs_uart_iec_app_var[g_ch_comm].iec_status |= COMM_MIMA_OK_IEC;  // ∏¯≥ˆ«Î«Û√¸¡Ó≥…π¶±Í ∂ //
 513   3                  Get_ACK_Answer(sptr);
 514   3                  gs_uart_iec_app_var[g_ch_comm].len = 1;
 515   3                  return TRUE;
 516   3              }
 517   2          }
 518   1      
 519   1          return FALSE;
 520   1      }
 521          
 522          
 523          //-------------------------------------------------------------------------------//
 524          //  Function:      INT8U IEC_Cmd_Read_Deal(INT8U* sptr,INT8U len)
 525          //  Description:   iec Õ®—∂∂¡÷∏¡Ó¥¶¿Ì≥Ã–Ú
 526          //  Parameters:    
 527          //  Returns:        Œﬁ                          
 528          //  Others:         
 529          //-------------------------------------------------------------------------------//
 530          INT8U IEC_Cmd_Read_Deal(INT8U* sptr)
 531          {
 532   1       INT8U  mem_type;
 533   1       INT8U  data_buff[70];
 534   1       INT8U  *ptr_adr;
 535   1       INT16U ctmp1;
 536   1              union  Union_DWordDef tmp_32u;
 537   1      ST_U32_U08  long_tmp;
 538   1      
 539   1        ST_U16_U08     LPRecStart,LPRecEnd;
 540   1        if((gs_uart_iec_app_var[g_ch_comm].iec_status &(COMM_REQUIST_OK_IEC+COMM_INFO_OK_IEC+COMM_MIMA_OK_IEC)) 
             -!= 0x07)   return(FALSE);     
 541   1          //get comm DI1 DI0
 542   1          Lib_Asc_BCDA(&comm_data.di1_di0.B08[0], sptr+4,8);
 543   1      
 544   1          //get other comm fram data  
 545   1          if(get_IEC_comm_var( comm_data.di1_di0.u32) == 0 )   return(FALSE);
 546   1          if( ( comm_data.Info.u16& EN_R) == 0 )  return(FALSE);
 547   1          //  ªÒ»° ˝æ›µƒ¥Ê¥¢¿‡–Õ //
 548   1          mem_type = (comm_data.Info.B08[0]>>3)&0x07;         
 549   1          // ˝æ›”Ú«Â¡„≤¢…Ë÷√∑¢ÀÕ≥§∂»
 550   1          Lib_Set_String((sptr+2), '0', comm_data.len_asc);  
 551   1      
 552   1          ptr_adr = comm_data.addr;
 553   1      //≤ª‘⁄±Ì∏Òƒ⁄ID¥¶¿Ì µ•Ãı∏∫∫…ID 
 554   1              if((comm_data.di1_di0.u32>=0x06010001)&&(comm_data.di1_di0.u32<=0x060105A0))
 555   1              {
 556   2                      ctmp1 = (INT16U)(comm_data.di1_di0.u32 - 0x06010001);
 557   2                      if(ctmp1 < LPRunPa.Num[0])      // ∂¡»°ID –°”⁄”⁄“—º«¬º ˝
 558   2                      {
 559   3                              comm_data.len = LPRec_Read_1(sptr+2, ctmp1);
 560   3                              comm_data.len_asc = 2*comm_data.len;    
 561   3                      }
 562   2                      else
 563   2                      {
 564   3      //                      comm_data.len = LPRec_Read_1(sptr+2, ctmp1);
 565   3      //                      comm_data.len_asc = 2*comm_data.len;    
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 14  

 566   3      //                      Lib_Set_String((sptr+2), 'F', comm_data.len_asc); 
 567   3                              comm_data.len_asc = 0;  
 568   3                      }
 569   2      
 570   2      
 571   2                      // ≥…π¶∫Û ˝æ›◊È÷° //
 572   2                      //api_deal_even_class_recode(ID_CLASS_I_COMM,START);
 573   2                      gs_uart_iec_app_var[g_ch_comm].len= (comm_data.len_asc+5);
 574   2                      *(sptr+0) = STX;
 575   2                      *(sptr+1) = '(';
 576   2                      CLRWDT(); *(sptr+2+comm_data.len_asc) = ')';
 577   2                      *(sptr+gs_uart_iec_app_var[g_ch_comm].len-2) =ETX;
 578   2              CLRWDT();       *(sptr+gs_uart_iec_app_var[g_ch_comm].len-1) = Get_Bcc_Chk(sptr, 1, gs_uart_iec_app_var[g_ch_c
             -omm].len-2);
 579   2      
 580   2                      return(TRUE); 
 581   2              }
 582   1              
 583   1              
 584   1              if((comm_data.di1_di0.u32>=0x060A0001)&&(comm_data.di1_di0.u32<=0x060A0120))//   //SXL 2019-01-6
 585   1        {
 586   2                      LPRecStart.u16 =(INT16U)((comm_data.di1_di0.u32 - 0x060A0001)*BLOCK_MAX_LEN);
 587   2                      LPRecEnd.u16 =LPRecStart.u16+BLOCK_MAX_LEN;
 588   2                      
 589   2                      if(LPReadPara.ReadLoraFlag == FALSE )
 590   2                      {                       
 591   3                              LPReadPara.Original_FrameNum = LPRunPa.Num[0] ;
 592   3                              LPReadPara.Original_Ptr = LPRunPa.Ptr[0] ;
 593   3                      }               
 594   2                      
 595   2                      comm_data.len_asc  = LPRec_Read_Block(sptr+2,LPRecStart.u16, LPRecEnd.u16);
 596   2                       
 597   2                      
 598   2                      if(LPReadPara.ReadLoraFlag == FALSE )   LPReadPara.ReadLoraFlag = TRUE; 
 599   2                              
 600   2                      gs_uart_iec_app_var[g_ch_comm].len= (comm_data.len_asc+5);
 601   2                      CLRWDT(); 
 602   2                      *(sptr+0) = STX;
 603   2                      *(sptr+1) = '(';CLRWDT(); 
 604   2                      *(sptr+2+comm_data.len_asc) = ')';
 605   2                      CLRWDT(); *(sptr+gs_uart_iec_app_var[g_ch_comm].len-2) =ETX;
 606   2                      *(sptr+gs_uart_iec_app_var[g_ch_comm].len-1) = Get_Bcc_Chk(sptr, 1, gs_uart_iec_app_var[g_ch_comm].len-2
             -);
 607   2      CLRWDT(); 
 608   2                      return(TRUE); 
 609   2                      
 610   2                      }
 611   1      
 612   1          // ∏˘æ›∂¡»° ˝æ›µƒIDœÓƒø◊ˆ∑÷÷ß¥¶¿Ì //
 613   1          switch(comm_data.di1_di0.u32)
 614   1          {   
 615   2              case 0x02010000:    //µÁ—π ‘¥ ˝æ›Œ™HEX32£¨0.1V¡ø∏Ÿ£¨–Ë“™◊™ªªŒ™BCD¬Î∏Ò Ω,XXX.XV //
 616   2              case 0x02010100:    //µÁ—π ‘¥ ˝æ›Œ™HEX32£¨0.1V¡ø∏Ÿ£¨–Ë“™◊™ªªŒ™BCD¬Î∏Ò Ω,XXX.XV //
 617   2                  Lib_long_bcd4(&long_tmp.B08[0],gs_measure_var_data.gs_really[0].dw_u_val.u32);
 618   2                  Lib_Copy_Str_TwoArry(&data_buff[0], &long_tmp.B08[2], 2);
 619   2                  Lib_BCD_AscA(sptr+2, &data_buff[0], comm_data.len); 
 620   2                  break;
 621   2              case 0x02020000:    //µÁ¡˜ ‘¥ ˝æ›Œ™HEX32£¨0.0001A¡ø∏Ÿ£¨–Ë“™◊™ªªŒ™BCD¬Î∏Ò Ω,XXX.XXXA //
 622   2              case 0x02020100:    //µÁ¡˜ ‘¥ ˝æ›Œ™HEX32£¨0.0001A¡ø∏Ÿ£¨–Ë“™◊™ªªŒ™BCD¬Î∏Ò Ω,XXX.XXXA //
 623   2                  Lib_long_bcd4(&long_tmp.B08[0],(gs_measure_var_data.gs_really[0].dw_i_val.u32));
 624   2                  Lib_Copy_Str_TwoArry(&data_buff[0], &long_tmp.B08[1], 3);
 625   2                  Lib_BCD_AscA(sptr+2, &data_buff[0], comm_data.len); 
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 15  

 626   2                  break;
 627   2      
 628   2              case 0x02030000:    //π¶¬ ‘¥ ˝æ›Œ™HEX32£¨0.0001KW¡ø∏Ÿ£¨–Ë“™◊™ªªŒ™BCD¬Î∏Ò Ω,XX.XXXXkW //
 629   2              case 0x02030100:    //π¶¬ ‘¥ ˝æ›Œ™HEX32£¨0.0001KW¡ø∏Ÿ£¨–Ë“™◊™ªªŒ™BCD¬Î∏Ò Ω,XX.XXXXkW //
 630   2                  Lib_long_bcd4(&long_tmp.B08[0],(gs_measure_var_data.gs_really[0].dw_p_val.u32));
 631   2                  Lib_Copy_Str_TwoArry(&data_buff[0], &long_tmp.B08[1], 3);
 632   2                  Lib_BCD_AscA(sptr+2, &data_buff[0], comm_data.len); 
 633   2                  break;
 634   2      
 635   2              case 0x02060000:    //π¶¬ “Ú ˝ ˝æ›Œ™HEX16£¨0.001£¨–Ë“™◊™ªªŒ™BCD¬Î∏Ò Ω0.001 //
 636   2              case 0x02060100:    //π¶¬ “Ú ˝ ˝æ›Œ™HEX16£¨0.001£¨–Ë“™◊™ªªŒ™BCD¬Î∏Ò Ω0.001 //
 637   2                  Lib_word_bcd2(&long_tmp.B08[0],(gs_measure_var_data.gs_really[0].dw_pf_val.u16));
 638   2                  Lib_Copy_Str_TwoArry(&data_buff[0], &long_tmp.B08[0], 2);
 639   2                  Lib_BCD_AscA(sptr+2, &data_buff[0], comm_data.len); 
 640   2                  break;
 641   2      
 642   2              case 0x02800002:    //µÁÕ¯∆µ¬  ˝æ›Œ™HEX16£¨0.01Hz£¨–Ë“™◊™ªªŒ™BCD¬Î∏Ò Ωxx.xx //
 643   2                  Lib_word_bcd2(&long_tmp.B08[0],(gs_measure_var_data.gs_really[0].w_freq_val.u16));
 644   2                  Lib_Copy_Str_TwoArry(&data_buff[0], &long_tmp.B08[0], 2);
 645   2                  Lib_BCD_AscA(sptr+2, &data_buff[0], comm_data.len); 
 646   2                  break;
 647   2      
 648   2              case 0x02800003:  //√ø∑÷÷””–π¶∆Ωæ˘–Ë¡ø‘¥ ˝æ›Œ™HEX32£¨0.0001KW¡ø∏Ÿ£¨–Ë“™◊™ªªŒ™BCD¬Î∏Ò Ω,XX.XXXXkW /
             -/
 649   2                  Lib_long_bcd4(&long_tmp.B08[0],(gs_md_var.min_var[0].val_min ));
 650   2                  Lib_Copy_Str_TwoArry(&data_buff[0], &long_tmp.B08[1], 3);
 651   2                  Lib_BCD_AscA(sptr+2, &data_buff[0], comm_data.len); 
 652   2                  break;
 653   2      
 654   2              case 0x02800006:    //µÁ±ÌŒ¬∂» ˝æ›Œ™HEX16£¨0.1…Ë ©∂»£¨//
 655   2                  //Lib_word_bcd2(&long_tmp.B08[0],(gs_measure_var_data.w_temp.u16));
 656   2                  Lib_Copy_Str_TwoArry(&data_buff[0], &gs_measure_var_data.w_temp.B08[0], 2);
 657   2                  Lib_BCD_AscA(sptr+2, &data_buff[0], comm_data.len); 
 658   2                  break;
 659   2                  
 660   2              case 0x02800007:    //µÁ≥ÿµÁ—π ˝æ›Œ™HEX16£¨0.1V£¨–Ë“™◊™ªªŒ™BCD¬Î∏Ò Ωxx.xx V//
 661   2                  Lib_word_bcd2(&long_tmp.B08[0],(gs_measure_var_data.w_bat_v.u16));
 662   2                  Lib_Copy_Str_TwoArry(&data_buff[0], &long_tmp.B08[0], 2);
 663   2                  Lib_BCD_AscA(sptr+2, &data_buff[0], comm_data.len); 
 664   2                  break;
 665   2      
 666   2      
 667   2      
 668   2              case 0x04000100://»’∆⁄º∞–«∆⁄(∆‰÷–0¥˙±Ì–«∆⁄ÃÏ)YYMMDDWWhhmmss
 669   2                  Lib_Copy_Str_TwoArry(&data_buff[0], ptr_adr, comm_data.len);
 670   2                  data_buff[7] = data_buff[0];        //ww
 671   2                  data_buff[0] = data_buff[1];        //YY
 672   2                  data_buff[1] = data_buff[2];        //MM
 673   2                  data_buff[2] = data_buff[3];        //DD
 674   2                  data_buff[3] = data_buff[7];        //WW
 675   2                  data_buff[4] = data_buff[4];        //hh
 676   2                  data_buff[5] = data_buff[5];        //mm
 677   2                  data_buff[6] = data_buff[6];        //ss
 678   2                  Lib_BCD_AscA(sptr+2, &data_buff[0], comm_data.len); 
 679   2                  break;
 680   2      
 681   2      
 682   2      
 683   2              case 0x04000401://±Ìµÿ÷∑ ±Ì∫≈ NNNNNNNNNNNN
 684   2                  mem_read(&data_buff[0], comm_data.addr,  comm_data.len,  mem_type );
*** WARNING C214 IN LINE 684 OF ..\C_SOURCE\S4_APIUSER\API_USER_COMM.C: 'Argument': conversion: pointer to non-pointer
 685   2                  comm_data.len_asc = get_meter_id_asclen(&data_buff[0], 16);
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 16  

 686   2                  comm_data.len = comm_data.len_asc/2;
 687   2                  Lib_BCD_AscA(sptr+2, &data_buff[0], comm_data.len);
 688   2      
 689   2                  break;
 690   2      
 691   2              case 0x04800001: //»Ìº˛∞Ê±æ∫≈ “— «ASC¬Î
 692   2                  Lib_Copy_Str_TwoArry(sptr+2, ptr_adr, comm_data.len);
 693   2                  break;              
 694   2                              
 695   2              default:
 696   2      ////////////////µÁƒ‹¡øÃÿ ‚¥¶¿Ì/////////////////////////////
 697   2                  if(comm_data.di1_di0.B08[0]==0x00)
 698   2                  {
 699   3                      comm_data.len = LEN_EC_UNIT;   // –ﬁ∏ƒªÒ»°≥§∂»//
 700   3                  }
 701   2      ///////////////////////////////////////////////////////////////////
 702   2      
 703   2                  if((comm_data.Info.u16&CM_ALL) == CM_BILL)
 704   2                  {
 705   3                      mem_read(&data_buff[0],  api_get_bill_record_addr(comm_data.addr), comm_data.len,  mem_typ
             -e );
*** WARNING C214 IN LINE 705 OF ..\C_SOURCE\S4_APIUSER\API_USER_COMM.C: 'Argument': conversion: pointer to non-pointer
 706   3                  }
 707   2                                                      else if((comm_data.Info.u16&CM_ALL) == CM_EBIL)// ¬º˛º«¬º¿‡ ˝æ›
 708   2                            {
 709   3                     mem_read(&data_buff[0], comm_data.addr,     (comm_data.len>>1),  mem_type );
*** WARNING C214 IN LINE 709 OF ..\C_SOURCE\S4_APIUSER\API_USER_COMM.C: 'Argument': conversion: pointer to non-pointer
 710   3                     mem_read(&data_buff[6], comm_data.addr+60,  (comm_data.len>>1),  mem_type );
*** WARNING C214 IN LINE 710 OF ..\C_SOURCE\S4_APIUSER\API_USER_COMM.C: 'Argument': conversion: pointer to non-pointer
 711   3                        }
 712   2                  else 
 713   2                  {
 714   3                      if(mem_type==MEM_RAM)
 715   3                      {
 716   4                          Lib_Copy_Str_TwoArry(&data_buff[0], ptr_adr, comm_data.len);
 717   4                      }
 718   3                      else
 719   3                      {
 720   4                          mem_read(&data_buff[0], comm_data.addr,  comm_data.len,  mem_type );
*** WARNING C214 IN LINE 720 OF ..\C_SOURCE\S4_APIUSER\API_USER_COMM.C: 'Argument': conversion: pointer to non-pointer
 721   4                      }
 722   3                  }
 723   2      
 724   2      ////////////////µÁƒ‹¡øÃÿ ‚¥¶¿Ì/////////////////////////////
 725   2                  if(comm_data.di1_di0.B08[0]==0x00)
 726   2                  {
 727   3                      Lib_Copy_Str_TwoArry(&data_buff[10], &data_buff[0], LEN_EC_UNIT);
 728   3                      api_get_energy_LCD(&data_buff[10], gs_dis_param.ec_form, &data_buff[0]) ;   
 729   3                  }
 730   2      ///////////////////////////////////////////////////////////////////
 731   2      
 732   2      ////////////////◊Ó¥Û–Ë¡øÃÿ ‚¥¶¿Ì/////////////////////////////
 733   2                  if(comm_data.di1_di0.B08[0]==0x01)
 734   2                  {  
 735   3                      Lib_Copy_Str_TwoArry(&long_tmp.B08[0], &data_buff[0], 4);
 736   3                      Lib_long_bcd4(&data_buff[0],long_tmp.u32);
 737   3                  }
 738   2      ///////////////////////////////////////////////////////////////////            
 739   2                  if(comm_data.len_asc == 5)
 740   2                  {
 741   3                      *(sptr+2) = Lib_BtoA(data_buff[0]&0x0f);
 742   3                      Lib_BCD_AscA(sptr+3, &data_buff[1], 2);   
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 17  

 743   3                  }
 744   2                  else
 745   2                  {
 746   3                      Lib_BCD_AscA(sptr+2, &data_buff[0], comm_data.len); 
 747   3                  }
 748   2                  break;      
 749   2          }
 750   1      
 751   1          // ≥…π¶∫Û ˝æ›◊È÷° //
 752   1          gs_uart_iec_app_var[g_ch_comm].len= (comm_data.len_asc+5);
 753   1          *(sptr+0) = STX;
 754   1          *(sptr+1) = '(';
 755   1          *(sptr+2+comm_data.len_asc) = ')';
 756   1          *(sptr+gs_uart_iec_app_var[g_ch_comm].len-2) =ETX;
 757   1          *(sptr+gs_uart_iec_app_var[g_ch_comm].len-1) = Get_Bcc_Chk(sptr, 1, gs_uart_iec_app_var[g_ch_comm].len
             --2);
 758   1              
 759   1          return(TRUE); 
 760   1      }
 761          
 762          
 763          //-------------------------------------------------------------------------------//
 764          //  Function:      INT8U IEC_Cmd_Write_Deal(INT8U* sptr,INT8U len)
 765          //  Description:   iec Õ®—∂–¥÷∏¡Ó¥¶¿Ì≥Ã–Ú
 766          //  Parameters:   lenŒ™…Ë÷√ ˝æ›µƒ µº ≥§∂»
 767          //  Returns:        Œﬁ                          
 768          //  Others:         
 769          //-------------------------------------------------------------------------------//
 770          INT8U IEC_Cmd_Write_Deal(INT8U* sptr,INT8U len)
 771          {
 772   1      // INT8U tmp_8u_01[16];
 773   1       INT8U  mem_type;
 774   1       INT8U  data_buff[70];
 775   1       INT8U  sectemp;
 776   1       INT8U i,MeterID_LenTmp; //±Ì∫≈  ”––ß≥§∂» asc
 777   1       INT8U  *ptr_adr;
 778   1       
 779   1          if((gs_uart_iec_app_var[g_ch_comm].iec_status &(COMM_REQUIST_OK_IEC+COMM_INFO_OK_IEC+COMM_MIMA_OK_IEC)
             -) != 0x07)   return(FALSE);
 780   1          //get comm DI1 DI0
 781   1          Lib_Asc_BCDA(&comm_data.di1_di0.B08[0], sptr+4,8);
 782   1          //get other comm fram data 
 783   1          if(get_IEC_comm_var( comm_data.di1_di0.u32) == 0 )   return(FALSE);
 784   1      
 785   1          if( ( comm_data.Info.u16& EN_W) == 0 )  return(FALSE);
 786   1          //  ªÒ»° ˝æ›µƒ¥Ê¥¢¿‡–Õ //
 787   1          mem_type = (comm_data.Info.B08[0]>>3)&0x07;         
 788   1          sectemp = SecurityCK();                                     //»®œﬁ≈–∂œ
 789   1          if(sectemp == mmover)   return(FALSE);
 790   1      
 791   1          // ˝æ›”Ú«Â¡„≤¢ºÏ≤ÈΩ” ’µƒ ˝æ›≥§∂»∫œ∑®–‘ //
 792   1          Lib_Set_String(&data_buff[0], 0x00, comm_data.len); 
 793   1          if(comm_data.di1_di0.u32== 0x04000401) //≥˝…Ë÷√±Ì∫≈Õ‚.∂º–Ë“™∂‘±» ˝æ›≥§∂»
 794   1          {
 795   2              if((len > comm_data.len_asc+16)||(len < 16))
 796   2              return(FALSE);
 797   2          }
 798   1          else
 799   1          {
 800   2              if(len != (comm_data.len_asc+16))          
 801   2              return(FALSE);
 802   2          }
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 18  

 803   1      
 804   1          ptr_adr = comm_data.addr;
 805   1      
 806   1          // ∏˘æ›…Ë÷√ ˝æ›µƒIDœÓƒø◊ˆ∑÷÷ß¥¶¿Ì //
 807   1          switch(comm_data.di1_di0.u32)
 808   1          {
 809   2      
 810   2              case 0x04000100://»’∆⁄º∞–«∆⁄(∆‰÷–0¥˙±Ì–«∆⁄ÃÏ)YYMMDDWWhhmmss  
 811   2                  Lib_Asc_BCDA(&data_buff[0], (sptr+13), comm_data.len_asc);   //AtoB(INT8U Asc)
 812   2                  gs_CurDateTime.Year= data_buff[0];
 813   2                  gs_CurDateTime.Month= data_buff[1];
 814   2                  gs_CurDateTime.Day= data_buff[2];
 815   2                  gs_CurDateTime.Week= data_buff[3];
 816   2                  gs_CurDateTime.Hour= data_buff[4];
 817   2                  gs_CurDateTime.Minute= data_buff[5];
 818   2                  gs_CurDateTime.Second= data_buff[6];
 819   2                  EA=0;
 820   2                  Set_RTCTime(&gs_CurDateTime);
 821   2                  EA=1;
 822   2                  mem_db_write(ADR_METER_VAR_RTC, &gs_CurDateTime.Week, 7, MEM_E2P1);
 823   2                  //api_handl_settle_month();
 824   2                  api_deal_even_class_recode(ID_CLASS_I_setRtc,START);
 825   2                  api_update_triffNo_pre_minute();
 826   2                  break;
 827   2                              
 828   2      
 829   2                  //±Ì∫≈Ãÿ ‚¥¶¿Ì
 830   2                  case 0x04000401://±Ìµÿ÷∑ ±Ì∫≈ 16∏ˆ◊÷Ω⁄ ◊‘  ”¶,»Á…Ë∆Ê ˝£¨‘Ú«∞≤π0
 831   2                      MeterID_LenTmp = (len-16);      //”––ß±Ì∫≈  ≥§∂»
 832   2                      if(((len-16)%2)!=0)     //∆Ê ˝‘Ú«∞√Ê≤π“ª∏ˆ0
 833   2                      {
 834   3                      for(i=(len-16);i>0;i--)
 835   3                      {
 836   4                      *(sptr+13+i) = *(sptr+13+i-1) ; //œÚ∫Û≈≤1Œª
 837   4                      }
 838   3                      *(sptr+13)= '0';                                        //∏ﬂŒª≤π0
 839   3                      MeterID_LenTmp = (len-16) +1;
 840   3                      }
 841   2                      comm_data.len_asc = MeterID_LenTmp;
 842   2                       Lib_Set_String(&data_buff[0], 0xFF, 16);
 843   2                       Lib_Asc_BCDA(&data_buff[0], (sptr+13), comm_data.len_asc);   //AtoB(INT8U Asc)                 
 844   2                      mem_db_write(comm_data.addr, &data_buff[0], comm_data.len, mem_type);           //–¥»Î”¶∏√ «16◊÷Ω⁄£
             -¨∂¯≤ª «…Ë÷√µƒ≥§∂»
*** WARNING C214 IN LINE 844 OF ..\C_SOURCE\S4_APIUSER\API_USER_COMM.C: 'Argument': conversion: pointer to non-pointer
 845   2                      break;
 846   2      
 847   2                              
 848   2                      case 0x04000B01://Ω·À„»’DDHH 4
 849   2                      Lib_Asc_BCDA(&data_buff[0], (sptr+13), comm_data.len_asc);   //AtoB(INT8U Asc)
 850   2                      if((data_buff[0]<0x01)||(data_buff[0]>0x28)||(data_buff[1]>0x23))               //¥ÌŒÛ≈–∂œ
 851   2                      {
 852   3                          return(FALSE);
 853   3                      }
 854   2                      mem_db_write(comm_data.addr, &data_buff[0], comm_data.len, mem_type);
*** WARNING C214 IN LINE 854 OF ..\C_SOURCE\S4_APIUSER\API_USER_COMM.C: 'Argument': conversion: pointer to non-pointer
 855   2                      break;
 856   2      
 857   2                      case 0x04000103://–Ë¡ø≤Œ ˝ PERIOD : SLID   4  //–ﬁ∏ƒ∫Û–Ë¡ø÷ÿ–¬º∆À„ //
 858   2                      Lib_Asc_BCDA(&data_buff[0], (sptr+13), comm_data.len_asc);   //AtoB(INT8U Asc)
 859   2                      if(((data_buff[0]%data_buff[1]) !=0)||(data_buff[0]>30)||(data_buff[0]==0)||(data_buff[1]=
             -=0))                //¥ÌŒÛ≈–∂œ//
 860   2                      {
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 19  

 861   3                          return(FALSE);
 862   3                      }
 863   2                      mem_db_write(comm_data.addr, &data_buff[0], comm_data.len, mem_type);
*** WARNING C214 IN LINE 863 OF ..\C_SOURCE\S4_APIUSER\API_USER_COMM.C: 'Argument': conversion: pointer to non-pointer
 864   2                      api_init_md_data_ram();
 865   2                      break;
 866   2      
 867   2      /*
 868   2      ///////////ŒÛ≤Ó–£±Ì//////////////////
 869   2                      case 0x0000FEB0: 
 870   2                      case 0x0000FEB1:
 871   2                      case 0x0000FEB2:
 872   2                      case 0x0000FEB3:
 873   2                      case 0x0000FEB4:
 874   2                      case 0x0000FEB5:
 875   2                              Measure_Electric_Err_Gain(sptr, comm_data.di1_di0.u32);         //±ÿ–Îœ»–£◊ºŒÛ≤Ó£¨—” ±1√Î“‘…œ–£◊ºµÁ≤Œ¡ø≤≈◊º/
             -/        
 876   2                              break;
 877   2      
 878   2                      //---- µ•∂¿–£±Ì//
 879   2                      case 0x80800101:
 880   2                      case 0x80800102:
 881   2                      case 0x80800103:
 882   2                      case 0x80800104:
 883   2                      case 0x80800105:
 884   2                      case 0x80800106:
 885   2                      case 0x80800107:
 886   2                      case 0x80800108:                
 887   2                      case 0x80800109:
 888   2                      case 0x8080010A:
 889   2                      case 0x8080010B:
 890   2                              Lib_Asc_BCDA(&data_buff[0], (sptr+13), comm_data.len_asc);
 891   2                              Lib_Copy_Str_TwoArry(&data_buff[0], ptr_adr,4);   // ˝æ›∏¸–¬ //
 892   2                          CLRWDT();
 893   2                          Save_EMU_AdjParam();
 894   2                              break;
 895   2      */
 896   2                              
 897   2                      //–£±Ì≥ı ºªØ(≤Œ ˝«Â¡„)   //
 898   2                      case 0x80800803:                
 899   2                      if((*(sptr+13)=='3')&&(*(sptr+14)=='3')&&(*(sptr+15)=='3'))  
 900   2                      {
 901   3                          if((*(sptr+16)=='3'))                                       // clear all
 902   3                          {
 903   4                              //–£±Ì≤Œ ˝«Â¡„//
 904   4                              gs_adj_emu_param.w1gain =0;
 905   4                              gs_adj_emu_param.w2gain =0;
 906   4                              CLRWDT();
 907   4                              Save_EMU_AdjParam();
 908   4                          }
 909   3                      }
 910   2                      else
 911   2                      {
 912   3                          return FALSE;
 913   3                      }
 914   2                      break;
 915   2      
 916   2                      case 0x08020100://÷ª«Âµ±«∞–Ë¡ø«Â¡„//
 917   2                          Lib_Asc_BCDA(&data_buff[0], (sptr+13), comm_data.len_asc);   //AtoB(INT8U Asc)
 918   2                          if((data_buff[0]!=0))  return(FALSE);
 919   2                          api_clr_current_MD_data();
 920   2                          CLRWDT();
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 20  

 921   2                          api_deal_even_class_recode(ID_CLASS_I_resetMD,START);
 922   2                              break;
 923   2      
 924   2                      case 0x08020200://NN=FF£¨«Â≥˝À˘”–Õ®µ¿£ª//
 925   2                              if((*(sptr+13)=='F')&&(*(sptr+14)=='F'))        //YYY
 926   2                              {
 927   3                                      api_clr_even_by_comm(); 
 928   3                                      CLRWDT();
 929   3                              }
 930   2                              else
 931   2                              {
 932   3                                      return(FALSE);
 933   3                              }
 934   2                              break;
 935   2                      case 0x08020300:
 936   2                              // Asc_BCDA( &data_buff[0],(sptr+13), 1*2);
 937   2                  // “ª∏ˆÕ®µ¿∏∫∫…º«¬º÷∏’Î°¢º«¬º∏ˆ ˝ 
 938   2                  if((*(sptr+13)=='0')&&(*(sptr+14)=='0'))    //YYY
 939   2                              {
 940   3                                      LoadProRst();
 941   3                                      CLRWDT();
 942   3                              }
 943   2                              else
 944   2                              {
 945   3                                      return(FALSE);
 946   3                              }
 947   2                              break;
 948   2                  
 949   2                      case 0x08020400://µÁ¡ø«Â¡„(µÁ±Ì◊‹«Â(µÁ¡ø+–Ë¡ø)) //
 950   2                          Lib_Asc_BCDA(&data_buff[0], (sptr+13), comm_data.len_asc);   //AtoB(INT8U Asc)
 951   2                          if((data_buff[0]!=0)||(data_buff[1]!=0)||(data_buff[2]!=0)||(data_buff[3]!=0))  return
             -(FALSE);
 952   2                          Proc_clr_meter();
 953   2                              break;
 954   2      
 955   2                      case 0x08020600://¬ˆ≥Âø⁄øÿ÷∆√¸¡Ó =0X5A –ﬁ∏ƒŒ™√Î¬ˆ≥Â£¨∆‰À˚÷µŒ™µÁƒ‹¬ˆ≥Â//
 956   2                          Lib_Asc_BCDA(&data_buff[0], (sptr+13), comm_data.len_asc);   //AtoB(INT8U Asc)
 957   2                          if(data_buff[0]==METER_FACTORY_MARK)      //  =0X5A –ﬁ∏ƒŒ™√Î¬ˆ≥Â //
 958   2                          {
 959   3                              Open_SecOut();   
 960   3                          }
 961   2                          else
 962   2                          {
 963   3                             Close_SecOut();
 964   3                             CFLED_INITLIZE();    
 965   3                          }
 966   2                              break;
 967   2                  
 968   2                      case 0x0000FEFF:
 969   2                               if((*(sptr+13)=='5')&&(*(sptr+14)=='5')&&(*(sptr+15)=='5')&&(*(sptr+16)=='5'))    //≥˝–£±Ì≤Œ ˝Õ‚£¨∆‰À˚
             -≤Œ ˝≥ı ºªØŒ™ƒ¨»œ≤Œ ˝  //
 970   2                              {
 971   3                                      mem_db_clr(0);   // ˝æ›«¯–£—È∫Õ»´≤ø«Â¡„ //
 972   3                                 while(1)
 973   3                                 {
 974   4                                      NOP();          // ∏¥Œª£¨µ»¥˝ ˝æ›ºÏ≤Èªÿ∏¥ ˝æ›£¨10√Î◊Û”“ //
 975   4                                 }    
 976   3                                      CLRWDT();
 977   3                              }
 978   2                               if((*(sptr+13)=='3')&&(*(sptr+14)=='3')&&(*(sptr+15)=='3')&&(*(sptr+16)=='3'))   //∞¸∫¨–£±Ì≤Œ ˝£¨À˘”–≤
             -Œ ˝≥ı ºªØŒ™ƒ¨»œ≤Œ ˝  //
 979   2                              {
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 21  

 980   3                                      mem_db_clr(0XA5);   // ˝æ›«¯–£—È∫Õ»´≤ø«Â¡„ //
 981   3                                 while(1)
 982   3                                 {
 983   4                                      NOP();          // ∏¥Œª£¨µ»¥˝ ˝æ›ºÏ≤Èªÿ∏¥ ˝æ›£¨10√Î◊Û”“ //
 984   4                                 }    
 985   3                                      CLRWDT();
 986   3                              }
 987   2                               
 988   2                              else
 989   2                              {
 990   3                                      return(FALSE);
 991   3                              }
 992   2                              break;
 993   2      
 994   2                default:
 995   2                       Lib_Asc_BCDA(&data_buff[0], (sptr+13), comm_data.len_asc);   //AtoB(INT8U Asc)
 996   2                          
 997   2                       if(mem_type == MEM_RAM)
 998   2                       {
 999   3                             mem_write(comm_data.addr,&data_buff[0], comm_data.len, mem_type);
*** WARNING C214 IN LINE 999 OF ..\C_SOURCE\S4_APIUSER\API_USER_COMM.C: 'Argument': conversion: pointer to non-pointer
1000   3                       }
1001   2                       else
1002   2                       {
1003   3                             mem_db_write(comm_data.addr, &data_buff[0], comm_data.len, mem_type);
*** WARNING C214 IN LINE 1003 OF ..\C_SOURCE\S4_APIUSER\API_USER_COMM.C: 'Argument': conversion: pointer to non-pointer
1004   3                       }
1005   2                                       
1006   2                              break;  
1007   2                         
1008   2              }
1009   1                      
1010   1      // Õ®—∂π˝∫Û œµÕ≥∏¸–¬
1011   1              if(((comm_data.di1_di0.u32 >= 0x04000801)&&(comm_data.di1_di0.u32 <= 0x04000807))
1012   1                      ||((comm_data.di1_di0.u32 >= 0x04010000)&&(comm_data.di1_di0.u32 <= 0x04010008)))
1013   1              {
1014   2              
1015   2                      api_update_triffNo_pre_minute();
1016   2              }
1017   1      
1018   1      /////////////////…Ë÷√œ‘ æ≤Œ ˝∫Û–Ë“™∏¸–¬///////
1019   1              if((comm_data.di1_di0.u32 == 0x04000302)||(comm_data.di1_di0.u32 == 0x04000303)||(comm_data.di1_di0.u32 =
             -= 0x04000310)||(comm_data.di1_di0.u32 == 0x040003A0)||(comm_data.di1_di0.u32 == 0x04040100))
1020   1              {
1021   2                      mem_read(&gs_dis_param.auto_sec, ADR_BLOCK21_DIS_PARAM_E2P, LEN_BLOCK21_DIS_PARAM_E2P, MEM_E2P1);
1022   2                      if((gs_dis_param.auto_sec<3)||(gs_dis_param.auto_sec>60))    gs_dis_param.auto_sec = 5;
1023   2                      if((gs_dis_param.key_sec<5)||(gs_dis_param.key_sec>60))    gs_dis_param.key_sec = 30;
1024   2              }       
1025   1              
1026   1              if((comm_data.di1_di0.u32 == 0x04040200)||(comm_data.di1_di0.u32 == 0x04040300))
1027   1              {
1028   2                      mem_read(&gs_dis_param.auto_sec, ADR_BLOCK21_DIS_PARAM_E2P, LEN_BLOCK21_DIS_PARAM_E2P, MEM_E2P1);
1029   2                      if((gs_dis_param.auto_sec<3)||(gs_dis_param.auto_sec>60))   gs_dis_param.auto_sec = 5;
1030   2                      if((gs_dis_param.key_sec<5)||(gs_dis_param.key_sec>60))   gs_dis_param.key_sec = 30;
1031   2              }
1032   1              
1033   1          //  ˝æ›…Ë÷√≥…π¶∫Ûµƒ◊È÷°≤Ÿ◊˜ //
1034   1          api_deal_even_class_recode(ID_CLASS_I_PROG,START);   //…˙≥…±‡≥Ã ¬º˛º«¬º //
1035   1          gs_uart_iec_app_var[g_ch_comm].len= 1;
1036   1          Get_ACK_Answer(sptr);        
1037   1          return(TRUE); 
1038   1      }
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 22  

1039          
1040          
1041          //-------------------------------------------------------------------------------//
1042          //  Function:     INT8U IEC_Cmd_Break_Deal(INT8U* sptr,INT8U len)
1043          //  Description:   iec Õ®—∂÷’÷π÷∏¡Ó¥¶¿Ì≥Ã–Ú
1044          //  Parameters:   
1045          //  Returns:        Œﬁ                          
1046          //  Others:         
1047          //-------------------------------------------------------------------------------//
1048          INT8U IEC_Cmd_Break_Deal(INT8U* sptr)
1049          {
1050   1      
1051   1             gs_uart_iec_app_var[g_ch_comm].iec_status |= COMM_BREAK_OK_IEC;
1052   1               gs_uart_iec_app_var[g_ch_comm].len= 1;
1053   1             Get_ACK_Answer(sptr);     
1054   1             return(TRUE);  
1055   1      }
1056          
1057          /*****************************************************************************
1058          ** Function name    :api_init_md_data_ram
1059          **
1060          ** Description         :≥ı ºªØµ±«∞–Ë¡øº∆À„RAM«¯ ˝æ›£¨≥Ã–Ú∏¥Œª≥ı ºªØµ˜”√        
1061          **
1062          ** Parameters         :NONE          
1063          **
1064          ** Returned value   :NONE
1065          **
1066          **----------------------------------------------------------------------------
1067          ** V01.01  MJ  2016-04-23
1068          ******************************************************************************/
1069          void lnk_tx_comm_ready( uint8 ch,uint8 start_index)
1070          {
1071   1          uint16 u16_badu;
1072   1          //comm_IEC_Tx_Ready();   
1073   1          switch(gs_uart_iec_app_var[ch].baud_rate)
1074   1          {
1075   2              case CBaud_3:
1076   2                  u16_badu =300;
1077   2              break;
1078   2              case CBaud_6:
1079   2                  u16_badu =600;
1080   2              break;
1081   2              case CBaud_12:
1082   2                  u16_badu =1200;
1083   2              break;
1084   2              case CBaud_24:
1085   2                  u16_badu =2400;
1086   2              break;
1087   2              case CBaud_48:
1088   2                  u16_badu =4800;
1089   2              break;
1090   2              case CBaud_96:
1091   2                  u16_badu =9600;
1092   2              break;
1093   2      
1094   2              default:
1095   2                  u16_badu =300;
1096   2              break;
1097   2          }
1098   1      
1099   1          P_IEC_BUFF = &gs_uart_drv_var[ch].buff[0] ;
1100   1              
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 23  

1101   1          Tx_UART_frist(&P_IEC_BUFF[start_index], gs_uart_iec_app_var[ch].len,u16_badu,ch);        //  ˝æ›∑¢ÀÕ /
             -/     
1102   1      }
1103          
1104          
1105          /*****************************************************************************
1106          ** Function name    :api_init_md_data_ram
1107          **
1108          ** Description         :≥ı ºªØµ±«∞–Ë¡øº∆À„RAM«¯ ˝æ›£¨≥Ã–Ú∏¥Œª≥ı ºªØµ˜”√        
1109          **
1110          ** Parameters         :NONE          
1111          **
1112          ** Returned value   :NONE
1113          **
1114          **----------------------------------------------------------------------------
1115          ** V01.01  MJ  2016-04-23
1116          ******************************************************************************/
1117          void api_handl_COMM_FRAME_ERROR( uint8 ch)
1118          {
1119   1          if(ch==UART_CH0_IR)           
1120   1          {
1121   2              Lib_Clr_String(&gs_uart_iec_app_var[ch].len, sizeof(UART_COMM_APP_VAR));   
1122   2              Init_UART2_hard(300);  //reset_uart(UART_RESET_ALL); 
1123   2              Init_UART_soft(ch); 
1124   2          }
1125   1          
1126   1          if(ch==UART_CH1_RS)
1127   1          {
1128   2              Lib_Clr_String(&gs_uart_iec_app_var[ch].len, sizeof(UART_COMM_APP_VAR));   
1129   2              Init_UART4_hard(300);  //reset_uart(UART_RESET_ALL);  
1130   2              Init_UART_soft(ch); 
1131   2          }
1132   1          
1133   1          return;
1134   1      }
1135          
1136          //-------------------------------------------------------------------------------//
1137          //  Function:      void init_comm_link(INT8U mode)         
1138          //  Description:   ≥ı ºªØ¥Æø⁄¡¥¬∑≤„±‰¡ø ˝æ›
1139          //  Parameters:   mode: Õ®—∂Õ®µ¿–Ú∫≈  
1140          //  Returns:        Œﬁ                          
1141          //  Others:         
1142          //-------------------------------------------------------------------------------//
1143          void process_iec62056_21 (INT8U ch)
1144          {
1145   1       INT8U buff_size;
1146   1       INT8U start_index;
1147   1       INT8U meterID_len;
1148   1      
1149   1       INT8U tmp_8u_01[16];
1150   1       INT8U tmp_8u_02[32];
1151   1      
1152   1       INT16U  u16_badu;
1153   1      
1154   1          
1155   1          if(ch > UART_CH_INDEX_MAX )  return ;
1156   1          
1157   1          if(gs_uart_iec_app_var[ch].tx_delay_flg ==TRUE ) 
1158   1          {
1159   2              return ;    //∑¢ÀÕµ»¥˝◊¥Ã¨ ±ÕÀ≥ˆ //
1160   2          }
1161   1      
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 24  

1162   1          buff_size = Get_UART_rx_buff(&P_IEC_BUFF,ch);
1163   1          if(buff_size==0)   return;    // √ø∏ˆ—≠ª∑ªÒ»°“ª¥ŒΩ” ’ ˝æ›≥§∂»£¨=0£¨ÕÀ≥ˆ //
1164   1      
1165   1      /////////////////////////////////////////////////////////////////////////
1166   1          if((gs_uart_iec_app_var[ch].iec_status & (COMM_INFO_OK_IEC)) !=0)
1167   1          {
1168   2              CLRWDT();
1169   2              CLRWDT();
1170   2          }
1171   1      
1172   1          if((gs_uart_iec_app_var[ch].iec_status & (COMM_REQUIST_OK_IEC)) !=0)
1173   1          {
1174   2              CLRWDT();
1175   2              CLRWDT();
1176   2          }
1177   1      
1178   1          if((gs_uart_iec_app_var[ch].iec_status & (COMM_MIMA_OK_IEC)) !=0)
1179   1          {
1180   2              CLRWDT();
1181   2              CLRWDT();
1182   2          }
1183   1      
1184   1      ////////////////////////////////////////////////////////////////////////
1185   1      
1186   1          // «∞µº◊÷Ω⁄¥¶¿Ì //
1187   1          for(start_index=0;start_index<10;start_index++)
1188   1          {
1189   2              if((P_IEC_BUFF[start_index]=='/')||(P_IEC_BUFF[start_index]==ACKCOM)||(P_IEC_BUFF[start_index]==SO
             -H))  break;
1190   2          }
1191   1      
1192   1          if(start_index>5)
1193   1          {
1194   2              //Ω” ’µƒ ˝æ›÷°¥ÌŒÛ£¨≤π≥‰¥Æø⁄∏¥Œª≤Ÿ◊˜      //
1195   2              api_handl_COMM_FRAME_ERROR(ch);
1196   2              return;
1197   2          }
1198   1      
1199   1          gs_uart_iec_app_var[ch].tx_delay_flg =FALSE;   // ”– ˝æ›Ω” ’ ±«Â≥˝∑¢ÀÕ—” ±±Í ∂ //
1200   1          gs_uart_iec_app_var[ch].delay_10ms = 0;   // ”– ˝æ›¥¶¿Ì ±«Â≥˝—” ±º∆ ˝∆˜ //
1201   1          gs_uart_iec_app_var[ch].err_flg = 0;
1202   1          g_ch_comm = ch;
1203   1          
1204   1          if(((buff_size >2) &&((P_IEC_BUFF[buff_size-2]) == CR ||(P_IEC_BUFF[buff_size-2]) == ETX )) )
1205   1          {
1206   2              buff_size =buff_size-start_index;
1207   2              //  ˝æ›÷°¥¶¿Ì //
1208   2              switch(P_IEC_BUFF[start_index])
1209   2              {
1210   3                  case IEC_COMM_REQUEST:      
1211   3                      if((gs_uart_iec_app_var[ch].iec_status & COMM_INFO_OK_IEC) !=0)
1212   3                      {
1213   4                          api_handl_COMM_FRAME_ERROR(ch);
1214   4                          return;
1215   4                      }
1216   3      
1217   3      //                if((buff_size==IEC_START_LENTH05) &&(ch==UART_CH0_IR))
1218   3      //                {
1219   3      //                    api_handl_COMM_FRAME_ERROR(ch);
1220   3      //                    return;
1221   3      //                }
1222   3                      mem_read (&tmp_8u_01[0],ADR_METER_PARAM1_METER_ID, 16,MEM_E2P1);
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 25  

1223   3                      meterID_len = get_meter_id_asclen(&tmp_8u_01[0], 16);   //ªÒ»°±Ì∫≈”––ßasc≥§∂»
1224   3                      Lib_BCD_AscA(&tmp_8u_02[0], &tmp_8u_01[0], 16);
1225   3                          
1226   3                      if(IEC_Comm_Request_Cmd_Judge(&P_IEC_BUFF[start_index], buff_size, &tmp_8u_02[0],meterID_l
             -en)==TRUE)
1227   3                      {
1228   4                          if(ch==UART_CH0_IR)   // ∫ÏÕ‚1200BPS//
1229   4                         {
1230   5                               Get_IEC_Comm_Request_Cmd_Answer(&P_IEC_BUFF[start_index], Meter_INFO_LENTH,(uint8
             -*)&meter_info_IR[0]);
1231   5                          }
1232   4                           if(ch==UART_CH1_RS)  // RS485 2400BPS//
1233   4                         {
1234   5                               Get_IEC_Comm_Request_Cmd_Answer(&P_IEC_BUFF[start_index], Meter_INFO_LENTH,(uint8
             -*)&meter_info[0]);
1235   5                          }           
1236   4                          gs_uart_iec_app_var[ch].len = Meter_INFO_LENTH+3;
1237   4                          gs_uart_iec_app_var[ch].iec_status |= COMM_INFO_OK_IEC;    // Œ’ ÷√¸¡Ó≥…π¶±Í ∂ //
1238   4                      }
1239   3                      else
1240   3                      {
1241   4                          //øº¬«µΩø™∑≈ ΩÕ®—∂£¨ ß∞‹ ±≤ª∑µªÿ ˝æ› //
1242   4                          api_handl_COMM_FRAME_ERROR(ch);
1243   4                          return;
1244   4                      }
1245   3                  break;
1246   3      
1247   3                  case IEC_COMM_ACKNOWLEDGEMENT:
1248   3                      if((gs_uart_iec_app_var[ch].iec_status & COMM_INFO_OK_IEC) ==0)
1249   3                      {
1250   4                          api_handl_COMM_FRAME_ERROR(ch);
1251   4                          return;
1252   4                      }
1253   3                      if(IEC_Comm_Acknowledgement_Cmd_Judge(&P_IEC_BUFF[start_index],buff_size)==TRUE)
1254   3                      {
1255   4                          gs_uart_iec_app_var[ch].baud_rate = P_IEC_BUFF[start_index+2];                        
             -                   //≤®Ãÿ¬ ∏≥÷µ  //
1256   4                          Get_IEC_Comm_Operand_Answer(&P_IEC_BUFF[start_index], MIMA_INFO_LENTH,(uint8*)&mima_in
             -fo[0]);    // ªÒ»° ˝æ›◊È÷° //
1257   4                          gs_uart_iec_app_var[ch].len = (MIMA_INFO_LENTH+6);
1258   4                          gs_uart_iec_app_var[ch].iec_status |= COMM_REQUIST_OK_IEC;  // ∏¯≥ˆ«Î«Û√¸¡Ó≥…π¶±Í ∂ //
1259   4                      }
1260   3                      else
1261   3                      {
1262   4                          gs_uart_iec_app_var[ch].iec_status &= ~COMM_REQUIST_OK_IEC;  // clr «Î«Û√¸¡Ó≥…π¶±Í ∂ /
             -/
1263   4                          Get_Error_Answer(&P_IEC_BUFF[start_index]);
1264   4                          gs_uart_iec_app_var[ch].len = 1;
1265   4                      }
1266   3      
1267   3                  break;
1268   3      
1269   3                  case IEC_COMM_COMMAND:
1270   3                      if((gs_uart_iec_app_var[ch].iec_status & COMM_REQUIST_OK_IEC) ==0)
1271   3                      {
1272   4                          api_handl_COMM_FRAME_ERROR(ch);
1273   4                          return;
1274   4                      }              
1275   3                      if(IEC_Comm_Command_Cmd_Judge(&P_IEC_BUFF[start_index],buff_size) !=TRUE)
1276   3                      {
1277   4                          //  ˝æ›Ω‚Œˆ ß∞‹ //
1278   4                          Get_Error_Answer(&P_IEC_BUFF[start_index]);
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 26  

1279   4                          gs_uart_iec_app_var[ch].len = 1;                       
1280   4                      }
1281   3                  break;
1282   3      
1283   3                  default:
1284   3                      gs_uart_iec_app_var[ch].err_flg |= FRAME_ERROR;   //÷°¥ÌŒÛ£¨–Ë“™∏¥Œª  //        
1285   3                  break;
1286   3              }
1287   2      
1288   2          }
1289   1          else
1290   1          {
1291   2              gs_uart_iec_app_var[ch].err_flg |= FRAME_ERROR;   //÷°¥ÌŒÛ£¨–Ë“™∏¥Œª  //        
1292   2          }
1293   1      
1294   1          if((gs_uart_iec_app_var[ch].err_flg & FRAME_ERROR) )
1295   1          {
1296   2              //Ω” ’µƒ ˝æ›÷°¥ÌŒÛ£¨≤π≥‰¥Æø⁄∏¥Œª≤Ÿ◊˜      //
1297   2              api_handl_COMM_FRAME_ERROR(ch);
1298   2              return;
1299   2          }
1300   1          else
1301   1          {
1302   2              
1303   2              gs_uart_iec_app_var[ch].tx_delay_flg =TRUE;
1304   2              gs_uart_iec_app_var[ch].tx_ready_10ms = COMM_DELAY_100MS;   // ”– ˝æ›¥¶¿Ì ±«Â≥˝—” ±º∆ ˝∆˜ //
1305   2              gs_uart_iec_app_var[ch].delay_10ms = 0;   
1306   2              if(gs_uart_iec_app_var[ch].iec_status ==(COMM_INFO_OK_IEC+COMM_REQUIST_OK_IEC))
1307   2              {
1308   3                  gs_uart_iec_app_var[ch].tx_ready_10ms  += 30;   // «–ªª≤®Ãÿ¬  ±—” ±‘ˆº”300ms //
1309   3              }
1310   2              gs_uart_iec_app_var[ch].start_index = start_index;
1311   2      
1312   2          }
1313   1      }
1314          
1315          
1316          /*****************************************************************************
1317          ** Function name    :api_init_md_data_ram
1318          **
1319          ** Description         :≥ı ºªØµ±«∞–Ë¡øº∆À„RAM«¯ ˝æ›£¨≥Ã–Ú∏¥Œª≥ı ºªØµ˜”√        
1320          **
1321          ** Parameters         :NONE          
1322          **
1323          ** Returned value   :NONE
1324          **
1325          **----------------------------------------------------------------------------
1326          ** V01.01  MJ  2016-04-23
1327          ******************************************************************************/
1328          void api_handl_COMM_pre_10ms(uint8 ch)
1329          {
1330   1      
1331   1          process_iec62056_21(ch);    
1332   1          
1333   1          if(gs_uart_iec_app_var[ch].delay_10ms >COMM_DELAY_3500MS)
1334   1          {   
1335   2              //≥¨ ±ÕÀ≥ˆŒ’ ÷£¨÷ÿ–¬Ω¯»Îø’œ–µ»¥˝◊¥Ã¨ //
1336   2              api_handl_COMM_FRAME_ERROR(ch);    
1337   2          }
1338   1      
1339   1          if((gs_uart_iec_app_var[ch].tx_ready_10ms ==0)&&(gs_uart_iec_app_var[ch].tx_delay_flg ==TRUE))
1340   1          {   
C51 COMPILER V9.01   API_USER_COMM                                                         01/31/2019 13:21:19 PAGE 27  

1341   2              // ˝æ›◊º±∏∑¢ÀÕ   //
1342   2              gs_uart_iec_app_var[ch].tx_delay_flg =FALSE;
1343   2              lnk_tx_comm_ready(ch,gs_uart_iec_app_var[ch].start_index);     
1344   2          }
1345   1      
1346   1      
1347   1      
1348   1      }
1349          
1350          
1351          /***************************************************************
1352          *    END
1353          ****************************************************************/
1354          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   6630    ----
   CONSTANT SIZE    =   3064    ----
   XDATA SIZE       =     36     254
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  10 WARNING(S),  0 ERROR(S)
